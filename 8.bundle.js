(window.webpackJsonp=window.webpackJsonp||[]).push([[8,10,13,20,29,33],{14:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return a}));var n=i(0),r=i(1),s=i(17);const o=new Map;function a({active:t,componentName:e,props:a}){o.has(e)||o.set(e,Object(r.d)(()=>i(16)("./".concat(e,".js"))));const c=o.get(e);return Object(n.h)(r.b,{fallback:Object(n.h)(s.a,null)},t?Object(n.h)(c,a):null)}},16:function(t,e,i){var n={"./AddComponent.js":[24,34],"./AsideList.js":[30,15],"./Footer.js":[31,2,11],"./NewsletterArticle.js":[32,2,7],"./NewsletterSection.js":[33,19],"./OrderedList.js":[20,24],"./TemplateSettings.js":[34,17],"./lazy-edit-component.js":[14,20],"./normalizeURL.js":[19,22]};function r(t){if(!i.o(n,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=n[t],r=e[0];return Promise.all(e.slice(1).map(i.e)).then((function(){return i(r)}))}r.keys=function(){return Object.keys(n)},r.id=16,t.exports=r},17:function(t,e,i){"use strict";var n=i(0),r=i(1);function s(t){t.target.close()}e.a=Object(r.e)((function(){return Object(r.c)(Object(n.h)("dialog",{"data-do-not-export":!0,open:!0,"data-ignore":!0,class:"loading",onClick:s},"Loading..."),document.body)}))},21:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i(0),r=i(22),s=i.n(r),o=i(3);function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function c(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var l=0;const d=new s.a;class u extends n.a{constructor(...t){super(...t),this.state={loading:!0}}static translate(t){let e;const i=new Promise(t=>e=t),n=c(this,h)[h].then(()=>new Promise((e,i)=>{d.onmessage=({data:t})=>{e(t)},d.onmessageerror=i,d.onerror=i,d.postMessage(t)})).finally(e);return c(this,h)[h]=i,n}componentDidMount(){this.translate()}componentDidUpdate(t){t.content!==this.props.content&&this.translate()}translate(){this.constructor.translate(this.props.content).then(t=>{this.setState({loading:!1,html:t})}).catch(t=>{console.error(t),this.setState({loading:!1,html:"<div data-ignore class='error'>Error when rendering markdown content</div>"})})}render(){return this.state.loading?Object(n.h)(o.a,null):Object(n.h)("output",a({"data-contents":!0,dangerouslySetInnerHTML:{__html:this.state.html}},this.props.attributes))}}var h="__private_"+l+++"_"+"translationJobs";Object.defineProperty(u,h,{writable:!0,value:Promise.resolve()})},22:function(t,e,i){t.exports=function(){return new Worker(i.p+"9934fcf3e23c2ee8b1da.worker.js")}},23:function(t,e,i){"use strict";i.r(e),i.d(e,"touchHandler",(function(){return o})),i.d(e,"keyboardHandler",(function(){return a})),i.d(e,"clickHandler",(function(){return c})),i.d(e,"dblClickHandler",(function(){return l}));const n=1,r=300,s=new WeakMap;function o(t){const[e]=t.composedPath(),i=s.get(e)||0,n=t.timeStamp||Date.now();s.set(e,n),n-i<r&&l.call(this,t)}function a(t){switch(t.key){case"Enter":l.call(this,t);break;case"Delete":this.base.remove(),i.e(0).then(i.bind(null,18)).then(t=>t.default).then(t=>t("Article has been removed, use undo to restore it."))}}function c(t){if(!this.state.writeMode&&!t.ctrlKey&&t.which===n){t.preventDefault();const[e]=t.composedPath();"A"===e.nodeName&&(e.contentEditable="true",setTimeout(()=>{try{this.base.focus()}catch{e.blur()}e.contentEditable="false",this.state.writeMode||i.e(0).then(i.bind(null,18)).then(t=>t.default).then(t=>t("Use Ctrl+Click to open the link"))},r))}}function l(t){if(!this.state.writeMode){var e,i;const s=[],o=t.composedPath();let a=0;for(;o[a]&&void 0===(null===(n=o[a].dataset)||void 0===n?void 0:n.key);){var n;a++}if(t.preventDefault(),window.getSelection){let t=0;const e=getSelection(),{anchorOffset:i,focusOffset:n}=e;if(a>0){let i=o[0];do{var r;const{previousSibling:e}=i;t+=(null==e?void 0:null===(r=e.textContent)||void 0===r?void 0:r.length)||0,i=e||i.parentNode}while(i&&i!==o[a]);this.setState({focusText:e.toString()})}s.push(t+i,t+n)}this.setState({writeMode:!0,focus:null===(e=o[a])||void 0===e?void 0:null===(i=e.dataset)||void 0===i?void 0:i.key,focusOffset:s})}}},37:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return b}));var n=i(0),r=i(23),s=i(21),o=i(14);function a(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var c=0;function l(t){return"__private_"+c+++"_"+t}const d=t=>t?Array.isArray(t)?t:[t]:[],u=t=>t;class h extends n.a{render(){return Object(n.h)("iframe",{src:this.props.src,frameborder:"0",width:"300",height:"175",loading:"lazy",allow:"autoplay; fullscreen; picture-in-picture",allowfullscreen:!0,loading:"lazy","data-key":"src"})}}class p extends n.a{render(){return Object(n.h)("img",{alt:this.props.alt,src:this.props.src,loading:"lazy","data-key":"src"})}}class f extends n.a{render(){return this.props.src?this.props.isVideo?Object(n.h)(h,this.props):Object(n.h)(p,this.props):null}}class b extends n.a{constructor(...t){super(...t),this.state={writeMode:!1,data:JSON.stringify(this.props)},Object.defineProperty(this,v,{writable:!0,value:r.clickHandler.bind(this)}),Object.defineProperty(this,w,{writable:!0,value:r.dblClickHandler.bind(this)}),Object.defineProperty(this,y,{writable:!0,value:r.touchHandler.bind(this)}),Object.defineProperty(this,O,{writable:!0,value:r.keyboardHandler.bind(this)}),Object.defineProperty(this,j,{writable:!0,value:this.onFocus.bind(this)}),Object.defineProperty(this,m,{writable:!0,value:this.update.bind(this)}),Object.defineProperty(this,S,{writable:!0,value:()=>this.setState({writeMode:!1},this.focus)})}update(t){this.setState({writeMode:!1,data:JSON.stringify(t)},this.focus)}onFocus(){this.base.removeEventListener("keydown",a(this,O)[O]),this.base.addEventListener("keyup",()=>{this.base.addEventListener("keydown",a(this,O)[O])},{once:!0})}focus(){this.base.focus()}render(){return Object(n.h)("article",{className:this.props.isMain?"main":void 0,"data-type":"NewsletterArticle","data-json":this.state.data,onClick:a(this,v)[v],onDblclick:a(this,w)[w],onTouchEnd:a(this,y)[y],onKeyUp:a(this,O)[O],onFocus:a(this,j)[j],tabIndex:0},Object(n.h)("h4",{"data-key":"title"},this.props.title),Object(n.h)(f,{isVideo:this.props.isVideo,src:this.props.illustration,alt:this.props.illustrationDescription}),Object(n.h)("div",null,Object(n.h)(s.a,{content:this.props.description,attributes:{"data-key":"description"}})),Object(n.h)("p",null,d(this.props.links).map((t,e)=>Object(n.h)(n.b,null,Object(n.h)("a",{"data-key":"label[".concat(e,"]"),href:u(t.href),target:"_blank",rel:"noopener",tabIndex:-1},t.label),".",Object(n.h)("br",null)))),Object(n.h)(o.default,{componentName:"NewsletterArticle",active:this.state.writeMode,props:{...this.props,focus:this.state.focus,focusOffset:this.state.focusOffset,focusText:this.state.focusText,saveState:a(this,m)[m],resetState:a(this,S)[S]}}))}}var v=l("clickHandler"),w=l("dblClickHandler"),y=l("touchHandler"),O=l("keyboardHandler"),j=l("onFocus"),m=l("update"),S=l("closeDialog")},44:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return o}));var n=i(0),r=i(26),s=i(27);function o({addSection:t,editSection:e,sections:i}){return Object(n.h)("nav",{class:"newsletter","data-ignore":!0},i.map(t=>Object(n.h)("a",{href:"#"+t.id,"data-link-to-edit":!0,onClick:e(t)},Object(n.h)("img",{src:t.illustration,alt:t.illustrationDescription}))),Object(n.h)("a",{href:"#",style:{display:"flex",alignItems:"center",justifyContent:"center",color:"black"},"data-link-to-create":!0,"data-do-not-export":!0,onClick:t},Object(n.h)(r.a,{icon:s.f,size:"2x"})))}},45:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return l}));var n=i(0),r=i(37),s=i(14);function o(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var a=0;function c(t){return"__private_"+a+++"_"+t}class l extends n.a{constructor(...t){super(...t),this.state={newArticle:null},Object.defineProperty(this,d,{writable:!0,value:this.setState.bind(this,{openNewArticleDialog:!0})}),Object.defineProperty(this,u,{writable:!0,value:{saveState:this.addNewArticle.bind(this),resetState:()=>this.setState({openNewArticleDialog:!1})}}),Object.defineProperty(this,h,{writable:!0,value:!1}),Object.defineProperty(this,p,{writable:!0,value:!1})}addNewArticle(t){this.setState({newArticle:Object(n.h)("output",{"data-request-render":!0,"data-json":JSON.stringify(t)}),openNewArticleDialog:!1},()=>o(this,h)[h]=!0)}componentDidUpdate(){o(this,p)[p]?this.setState({newArticle:null},()=>{var t,e;o(this,p)[p]=!1,null===(t=this.base)||void 0===t||null===(e=t.querySelector("article:last-of-type"))||void 0===e||e.focus()}):o(this,h)[h]&&(o(this,p)[p]=!0,o(this,h)[h]=!1)}render(){const t=this.props.content||[],e=t.filter(({isMain:t})=>!t).length,i=e%2==0?2:e%3==0||(e-1)%3==0?3:2;return Object(n.h)("section",{className:"newsletter","data-type":"NewsletterSection",style:{"--nb-of-columns":i},id:this.props.id},Object(n.h)("output",{hidden:!0,"data-key":"id"},this.props.id),Object(n.h)("output",{hidden:!0,"data-key":"illustration"},this.props.illustration),Object(n.h)("output",{hidden:!0,"data-key":"illustrationDescription"},this.props.illustrationDescription),Object(n.h)("h2",{className:"newsletter","data-key":"title"},this.props.title),t.map(t=>Object(n.h)(r.default,t)),Object(n.h)("button",{"data-ignore":!0,"data-do-not-export":!0,style:"grid-column: span var(--nb-of-columns)",onClick:o(this,d)[d]},"Add a new article"),Object(n.h)(s.default,{componentName:"NewsletterArticle",active:this.state.openNewArticleDialog,props:o(this,u)[u]}),this.state.newArticle)}}var d=c("createNewArticle"),u=c("newArticleProps"),h=c("readyToConsumeState"),p=c("readyToCleanState")},63:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return u}));var n=i(0),r=i(14),s=i(44),o=i(45);function a(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var c=0;function l(t){return"__private_"+c+++"_"+t}const d="NewsletterSection";class u extends n.a{constructor(...t){super(...t),this.state={newSection:null},Object.defineProperty(this,h,{writable:!0,value:this.addSection.bind(this)}),Object.defineProperty(this,p,{writable:!0,value:this.editSection.bind(this)}),Object.defineProperty(this,f,{writable:!0,value:()=>{const{id:t}=this.state.edit;this.setState({edit:null},()=>{var e;return null===(e=this.base.querySelector("a[href='#".concat(t||"","']")))||void 0===e?void 0:e.focus()})}}),Object.defineProperty(this,b,{writable:!0,value:!1}),Object.defineProperty(this,v,{writable:!0,value:!1}),Object.defineProperty(this,w,{writable:!0,value:void 0})}addSection(t){t.preventDefault(),this.setState({edit:{type:d,saveState:t=>{a(this,w)[w]=t.id,this.setState({edit:null,newSection:Object(n.h)("output",{"data-request-render":!0,"data-json":JSON.stringify(t)})},()=>a(this,b)[b]=!0)}}})}editSection(t){return e=>{e.preventDefault(),this.setState({edit:{...t,saveState:e=>{const{id:i}=t,n=document.getElementById(i);n.id=e.id,Object.entries(e).forEach(([t,e])=>{const i=n.querySelector("[data-key='".concat(t,"']"));for(;i&&i.firstChild.nextSibling;)i.removeChild(i.firstChild);i&&(i.firstChild.textContent=e)});const r=n.parentElement.querySelector('nav>a[href="#'.concat(i,'"]'));r.href="#"+e.id,r.firstElementChild.src=e.illustration,r.firstElementChild.alt=e.illustrationDescription,r.focus()}}})}}componentDidUpdate(){a(this,v)[v]?this.setState({newSection:null},()=>{const t=document.getElementById(a(this,w)[w]);a(this,v)[v]=!1,t&&requestAnimationFrame(()=>{var e;null===(e=t.querySelector("button"))||void 0===e||e.focus()})}):a(this,b)[b]&&(a(this,v)[v]=!0,a(this,b)[b]=!1)}render(){const t=this.props.content||[];return Object(n.h)("section",{class:"newsletter","data-type":"FeatureStories"},Object(n.h)("h2",{class:"newsletter","data-key":"title"},this.props.title||"[[Title]]"),Object(n.h)(s.default,{sections:t,addSection:a(this,h)[h],editSection:a(this,p)[p]}),Object(n.h)(r.default,{componentName:d,active:!!this.state.edit,props:{...this.state.edit,resetState:a(this,f)[f]}}),t.map(t=>Object(n.h)(o.default,t)),this.state.newSection)}}var h=l("addSection"),p=l("editSection"),f=l("resetState"),b=l("readyToConsumeState"),v=l("readyToCleanState"),w=l("lastInsertedSectionId")}}]);