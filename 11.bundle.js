(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{21:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var s=n(0),r=n(22),o=n.n(r),i=n(3);function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t}).apply(this,arguments)}function c(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var l=0;const h=new o.a;class u extends s.a{constructor(...t){super(...t),this.state={loading:!0}}static translate(t){let e;const n=new Promise(t=>e=t),s=c(this,p)[p].then(()=>new Promise((e,n)=>{h.onmessage=({data:t})=>{e(t)},h.onmessageerror=n,h.onerror=n,h.postMessage(t)})).finally(e);return c(this,p)[p]=n,s}componentDidMount(){this.translate()}componentDidUpdate(t){t.content!==this.props.content&&this.translate()}translate(){this.constructor.translate(this.props.content).then(t=>{this.setState({loading:!1,html:t})}).catch(t=>{console.error(t),this.setState({loading:!1,html:"<div data-ignore class='error'>Error when rendering markdown content</div>"})})}render(){return this.state.loading?Object(s.h)(i.a,null):Object(s.h)("output",a({"data-contents":!0,dangerouslySetInnerHTML:{__html:this.state.html}},this.props.attributes))}}var p="__private_"+l+++"_"+"translationJobs";Object.defineProperty(u,p,{writable:!0,value:Promise.resolve()})},22:function(t,e,n){t.exports=function(){return new Worker(n.p+"9934fcf3e23c2ee8b1da.worker.js")}},31:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return c}));var s=n(0),r=n(46),o=n(35);function i(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var a=0;class c extends s.a{constructor(...t){super(...t),Object.defineProperty(this,l,{writable:!0,value:this.handleSubmit.bind(this)}),this.state={type:this.props.type,text:this.props.text}}handleSubmit(){const t={...this.state};requestIdleCallback(()=>this.props.saveState(t))}render(){return Object(s.h)(o.a,{onClose:this.props.resetState},Object(s.h)("form",{method:"dialog",onSubmit:i(this,l)[l]},Object(s.h)("div",null,Object(s.h)("label",null,"Footer: ",Object(s.h)(r.a,{name:"description",value:this.state.text,onChange:t=>this.setState({text:t.target.value}),initialFocus:this.props.focusPosition,initiallyActive:!0})),Object(s.h)("button",{type:"submit"},"Save"),Object(s.h)("button",{type:"reset",onClick:this.props.resetState},"Cancel"))))}}var l="__private_"+a+++"_"+"handleSubmit"},35:function(t,e,n){"use strict";var s=n(0),r=n(1);const o="HTMLDialogElement"in window;var i=t=>o?Promise.resolve():Promise.all([n.e(37).then(n.bind(null,72)),n.e(26).then(n.t.bind(null,73,7))]).then(e=>e[0].default.registerDialog(t));n.d(e,"a",(function(){return c}));const a=t=>t.stopPropagation();class c extends s.a{constructor(...t){super(...t),this.dialog=Object(s.g)()}componentDidMount(){this.update()}componentDidUpdate(){this.update()}update(){const{current:t}=this.dialog;i(t).then(()=>t&&!t.open&&t.showModal())}render(){return Object(r.c)(Object(s.h)("dialog",{"data-do-not-export":!0,"data-ignore":!0,onClose:this.props.onClose,onClick:a,ref:this.dialog},this.props.children),document.body)}}},42:function(t,e,n){t.exports=function(){return new Worker(n.p+"949e7fc7c91b7ff54d3d.worker.js")}},43:function(t,e,n){},46:function(t,e,n){"use strict";var s=n(0),r=n(26),o=n(27),i=n(21),a=n(42),c=n.n(a);const l=Symbol("ul"),h=Symbol("ol"),u={[l]:/^(\s*)([-*]\s)/,[h]:/^(\s*)(\d+\.\s)/},p={[l]:"- ",[h]:"1. "},d=/^(\s*)(\d+\.|-|\*)\s/,f="\n";n(43);function b(){return(b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t}).apply(this,arguments)}function g(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}n.d(e,"a",(function(){return k}));var m=0;function v(t){return"__private_"+m+++"_"+t}const O=new c.a,w=[{label:o.a,char:"**",shortcut:"b",help:"Bold"},{label:o.g,char:"_",shortcut:"i",help:"Italic"},{label:o.j,listType:l,help:"Unorded list"},{label:o.i,listType:h,help:"Ordered list"},{label:o.h,charBefore:"[",charAfter:"](https://)",selectionAfter:!0,selectionOffset:[2,1],shortcut:"k",help:"Hypertext link"}],y=/\n(\s*[-*])\s.+$/,x=/\n(\s*)(\d+)\.\s.+$/,j=/\n\s*(-|\d+\.)\s*$/,P=/\n\s*\d+\.\s*$/,S="md-command";class k extends s.a{constructor(...t){super(...t),this.state={active:this.props.initiallyActive},this.focusPosition=this.props.focusPosition,this.textarea=Object(s.g)(),Object.defineProperty(this,C,{writable:!0,value:this.helper.bind(this)}),Object.defineProperty(this,R,{writable:!0,value:this.makePrettier.bind(this)}),Object.defineProperty(this,_,{writable:!0,value:{contenteditable:"true",className:"editable-markdown-preview",onBlur:this.getCaretPosition.bind(this),onClick:t=>{t.stopImmediatePropagation(),this.setState({active:!0})},onFocus:()=>{this.setState({active:!0},()=>{var t;return null===(t=this.textarea.current)||void 0===t?void 0:t.focus()})}}}),Object.defineProperty(this,D,{writable:!0,value:Object(s.h)("p",null,Object(s.h)("button",{hidden:!0,type:"button",onClick:()=>{var t;return null===(t=this.textarea.current)||void 0===t?void 0:t.focus()}}),w.map(t=>Object(s.h)("button",{onClick:this.handleCommand(t),accesskey:t.shortcut,type:"button",className:S,title:t.help},Object(s.h)(r.a,{icon:t.label})))," | ",Object(s.h)("button",{className:"md-preview",accesskey:"s",onClick:()=>this.setState({active:!1})},Object(s.h)(r.a,{icon:o.d})))})}static makePrettier(t){let e;const n=new Promise(t=>e=t),s=g(this,T)[T].then(()=>new Promise((e,n)=>{O.onmessage=({data:t})=>{e(t)},O.onmessageerror=n,O.onerror=n,O.postMessage(t)})).finally(e);return g(this,T)[T]=n,s}getCaretPosition(t){if(window.getSelection){const{anchorNode:t,anchorOffset:e}=window.getSelection();this.focusPosition={text:t.textContent,offset:e}}}handleCommand(t){return e=>{const{current:n}=this.textarea;if(n){if(t.listType)!function(t,e){const{selectionStart:n,selectionEnd:s,value:r}=e,o=p[t],i=u[t],a=Math.max(0,r.lastIndexOf(f,n-1)),c=function(t,e,n){const s=t.indexOf(e,n);return-1===s?t.length:s}(r,f,s);if(n===s){const t=r.substring(a,c);if(s===r.length||r.charAt(n)===f)if(0===n||r.charAt(n-1)===f)e.setRangeText(t+f+o,a,c,"end");else if(d.test(t)){const[n,s]=t.match(d);e.setRangeText(t+f+s+"    "+o,a,c,"end")}else e.setRangeText(f+o+t,a,c,"end");else i.test(t)?e.setRangeText(t.replace(i,""),a,c):d.test(t)?e.setRangeText(t.replace(d,(t,e)=>e+o),a,c):e.setRangeText(o+t,a,c)}else{const t=r.substring(a,c).split(f).filter(String);t.reduce((t,e)=>t&&i.test(e),!0)?e.setRangeText(t.map(t=>t.replace(i,"")).join(f),a,c):t.reduce((t,e)=>t&&d.test(e),!0)?e.setRangeText(t.map(t=>t.replace(d,(t,e)=>e+o)).join(f),a,c):e.setRangeText(t.map(t=>o+t).join(f),a,c)}}(t.listType,n);else{const{selectionStart:e,selectionEnd:s,value:r}=n,o=t.charBefore||t.char||"",i=t.charAfter||t.char||"",a=r.substring(e-o.length,e)===o&&r.substring(s,s+i.length)===i;if(n.value=a?r.substring(0,e-o.length)+r.substring(e,s)+r.substring(s+i.length):r.substring(0,e)+o+r.substring(e,s)+i+r.substring(s),t.selectionAfter)if(t.selectionOffset){const[e,r]=t.selectionOffset;n.setSelectionRange(s+o.length+e,s+o.length+i.length-r)}else n.setSelectionRange(s+i.length,s+i.length);else a?n.setSelectionRange(e-o.length,s-o.length):n.setSelectionRange(e+o.length,s+o.length)}this.props.onChange({target:n}),n.focus()}}}helper(t){const{value:e,selectionStart:n,selectionEnd:s}=t.target,r=e.lastIndexOf("\n",n-1),o=e.indexOf("\n",s-1),i=e.substring(~r?r:0,~o?o:void 0);if("Enter"===t.key)if(y.test(i)){t.preventDefault();const[e,r]=i.match(y);t.target.setRangeText("\n".concat(r," "),n,s,"end")}else if(x.test(i)){t.preventDefault();const[e,r,o]=i.match(x);t.target.setRangeText("\n".concat(r).concat(Number(o)+1,". "),n,s,"end")}else j.test(i)&&t.target.setRangeText("\n",n-3,s,"end");else"Tab"===t.key&&(j.test(i)?(t.preventDefault(),t.target.setRangeText("  - ",n-2-P.test(i),s,"end")):0===i.trim().length&&(t.preventDefault(),t.target.setRangeText(" > ",n,s,"end")))}makePrettier(t){var e;const{current:n}=this.textarea,{relatedTarget:s}=t;if(n&&!(null==s?void 0:null===(e=s.classList)||void 0===e?void 0:e.contains(S))){const{value:t}=n;this.constructor.makePrettier(t).then(t=>{n.value=t,this.props.onChange({target:n})}).catch(console.warn)}}componentDidMount(){if(this.props.initiallyActive&&this.props.initialFocus){const{current:t}=this.textarea,{text:e,start:n,end:s}=this.props.initialFocus,r=t.value.indexOf(e,n)-n;t.setSelectionRange(r+n,r+s),requestAnimationFrame(()=>t.focus())}}componentDidUpdate(){if(this.focusPosition&&this.textarea.current){const{current:t}=this.textarea,e=t.value.lastIndexOf(this.focusPosition.text)+this.focusPosition.offset;t.setSelectionRange(e,e),this.focusPosition=null}}render(){return this.state.active?Object(s.h)("fieldset",{className:"markdown-editor"},Object(s.h)("legend",null,"Markdown editor"),g(this,D)[D],Object(s.h)("p",null,Object(s.h)("textarea",b({},this.props,{ref:this.textarea,onKeyDown:g(this,C)[C],onBlur:g(this,R)[R],rows:"10",cols:"50"})))):this.props.value?Object(s.h)(i.a,{content:this.props.value,attributes:g(this,_)[_]}):Object(s.h)("p",{onClick:t=>{t.stopImmediatePropagation(),this.setState({active:!0})},onFocus:()=>{this.setState({active:!0})}},Object(s.h)("em",{style:{fontSize:"smaller"}},"Empty section, click to add content."))}}var T=v("prettierJobs"),C=v("helper"),R=v("makePrettier"),_=v("markdownContentAttributes"),D=v("actionBar");Object.defineProperty(k,T,{writable:!0,value:Promise.resolve()})}}]);