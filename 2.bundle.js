(window.webpackJsonp=window.webpackJsonp||[]).push([[2,20,21],{36:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return a});var s=n(8);const i=/\/search#documentUUID\/([a-f0-9\-]+)\/(.+)$/;function a(t){if(i.test(t)&&s.default.getHostNameRegExp().test(t)){const[e,n,a]=i.exec(t),r=new URL("/search",s.default.get());return r.searchParams.set("documentUUID",n),r.searchParams.set("title",a),r.toString()}try{t=new URL(t).toString()}catch{}return t}},38:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return a});var s=n(0),i=n(12);class a extends s.a{handleDrag({currentTarget:t},e){const n=Array.from(t.parentNode.children),s=n.indexOf(t),i=n.indexOf(e);this.props.handleReOrder(s,i)}render(){const t=this.props.content||[];return Object(s.h)("ol",{className:"ordered-list"},t.concat([{}]).map(({label:e,href:n},a)=>Object(s.h)("li",{draggable:a<t.length,onDragStart:Object(i.a)(this.handleDrag.bind(this)),key:a},Object(s.h)("input",{name:"label",value:e||"",placeholder:"Link label",onChange:t=>this.props.handleChange(t,a)}),Object(s.h)("input",{name:"href",value:n||"",placeholder:"Link URL",onChange:t=>this.props.handleChange(t,a),type:"url"}))))}}},43:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return b});var s=n(0),i=n(38),a=n(61),r=n(59),o=n(36);function l(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function c(t,e){const{target:n}=e,{name:s,value:i}=n;t({...this.props,[s]:i})}class h extends s.a{constructor(...t){super(...t),u.set(this,{writable:!0,value:c.bind(this,this.props.onChange)}),p.set(this,{writable:!0,value:this.disableIllustration.bind(this)}),d.set(this,{writable:!0,value:this.switchToImage.bind(this)}),f.set(this,{writable:!0,value:this.switchToVideo.bind(this)})}static getDerivedStateFromProps({src:t}){return{noIllustration:!t}}disableIllustration(t){this.props.onChange({src:void 0,alt:void 0,isVideo:void 0})}switchToVideo(t){this.props.onChange({src:"about:blank",alt:void 0,isVideo:!0}),requestAnimationFrame(()=>t.target.form.elements.src.focus())}switchToImage(t){this.props.onChange({src:"about:blank",alt:"",isVideo:!1}),requestAnimationFrame(()=>t.target.form.elements.src.focus())}render(){return Object(s.h)("fieldset",null,Object(s.h)("legend",null,"Illustration"),"Illustration type: ",Object(s.h)("label",null,Object(s.h)("input",{onChange:l(this,p),name:"isVideo",type:"radio",value:"noIllustration",checked:this.state.noIllustration})," No illustration"),Object(s.h)("label",null,Object(s.h)("input",{onChange:l(this,d),name:"isVideo",type:"radio",value:"false",checked:!this.state.noIllustration&&!this.props.isVideo})," Image"),Object(s.h)("label",null,Object(s.h)("input",{onChange:l(this,f),name:"isVideo",type:"radio",value:"true",checked:!this.state.noIllustration&&this.props.isVideo})," Video"),this.state.noIllustration?null:Object(s.h)("label",null,this.props.isVideo?"Video":"Image"," URL: ",Object(s.h)("input",{onChange:l(this,u),name:"src",type:"url",value:this.props.src})),this.state.noIllustration||this.props.isVideo?null:Object(s.h)("label",null,"Image description: ",Object(s.h)("input",{onChange:l(this,u),name:"alt",value:this.props.alt,placeholder:"Mandatory description of the image",required:!0})))}}var u=new WeakMap,p=new WeakMap,d=new WeakMap,f=new WeakMap;class b extends s.a{constructor(...t){var e,n,i;super(...t),e=this,n="form",i=Object(s.g)(),n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,g.set(this,{writable:!0,value:c.bind(this,this.setState.bind(this))}),m.set(this,{writable:!0,value:this.handleSubmit.bind(this)}),v.set(this,{writable:!0,value:this.handleListChange.bind(this)}),w.set(this,{writable:!0,value:this.handleListReOrder.bind(this)}),O.set(this,{writable:!0,value:({isVideo:t,src:e,alt:n})=>this.setState({isVideo:t,illustration:e,illustrationDescription:n})})}componentWillMount(){const{type:t,title:e,description:n,links:s}=this.props;this.setState({type:t,title:e,description:n,isMain:!!this.props.isMain,isVideo:!!this.props.isVideo,illustration:this.props.illustration||null,illustrationDescription:this.props.illustrationDescription,links:Array.isArray(s)?s:[]})}componentDidMount(){this.update()}componentDidUpdate(t){this.update(t)}update(t={}){const{current:e}=this.form;if(e&&t.focus!==this.props.focus){const t=this.props.focus,n=null==t?void 0:t.match(/^(.+)\[(\d+)\]$/),s=n?e.querySelectorAll("[name=".concat(n[1],"]")).item(n[2]):e.querySelector("[name=".concat(t,"]"));s&&requestAnimationFrame(()=>{if(this.props.focusOffset){let t=this.props.focusText?s.value.indexOf(this.props.focusText,this.props.focusOffset[0])-this.props.focusOffset[0]:0;s.setSelectionRange(...this.props.focusOffset.map(e=>e+t))}s.focus()})}}handleListChange(t,e){const{name:n,value:s}=t.target,{links:i}=this.state;e===i.length?i.push({[n]:s}):i[e][n]=s,this.setState({links:i})}handleSubmit(){const t={...this.state};Array.isArray(this.state.links)&&(t.links=this.state.links.filter(({label:t,href:e})=>t||e).map(({label:t,href:e})=>({label:t||"[Link]",href:Object(o.default)(e)||"about:blank"}))),t.illustration=t.illustration?Object(o.default)(t.illustration):void 0,requestAnimationFrame(()=>this.props.saveState(t))}handleListReOrder(t,e){const n=this.state.links;let s=[];-1===e?s=s.concat(n.slice(0,t),n.slice(t+1)):t<e?s=s.concat(n.slice(0,t),n.slice(t+1,e),n.slice(t,1),n.slice(e)):t>e&&(s=s.concat(n.slice(0,e),n.slice(t,t+1),n.slice(e,t),n.slice(t+1))),t!==e&&this.setState({links:s})}render(){return Object(s.h)(r.a,{onClose:this.props.resetState},Object(s.h)("form",{method:"dialog",ref:this.form,onSubmit:l(this,m)},Object(s.h)("div",null,Object(s.h)("label",null,"Title: ",Object(s.h)("input",{name:"title",required:!0,value:this.state.title,onChange:l(this,g)})),Object(s.h)("label",null,"Featured article: ",Object(s.h)("input",{name:"isMain",checked:this.state.isMain,type:"checkbox",onChange:l(this,g)})),Object(s.h)(h,{isVideo:this.state.isVideo,src:this.state.illustration,alt:this.state.illustrationDescription,onChange:l(this,O)}),Object(s.h)("label",null,"Text: ",Object(s.h)(a.a,{name:"description",value:this.state.description,onChange:l(this,g),initiallyActive:"description"===this.props.focus})),Object(s.h)(i.default,{content:this.state.links,handleChange:l(this,v),handleReOrder:l(this,w)}),Object(s.h)("button",{type:"submit"},"Save"),Object(s.h)("button",{type:"reset",onClick:this.props.resetState},"Cancel"))))}}var g=new WeakMap,m=new WeakMap,v=new WeakMap,w=new WeakMap,O=new WeakMap},57:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var s=n(0),i=n(58);function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t}).apply(this,arguments)}const r=new(n.n(i).a);class o extends s.a{constructor(...t){var e,n,s;super(...t),s={loading:!0},(n="state")in(e=this)?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s}static translate(t){let e;const n=new Promise(t=>e=t),s=function(t,e,n){if(t!==e)throw new TypeError("Private static access of wrong provenance");return n.value}(this,o,l).then(()=>new Promise((e,n)=>{r.onmessage=({data:t})=>{e(t)},r.onmessageerror=n,r.onerror=n,r.postMessage(t)})).finally(e);return function(t,e,n,s){if(t!==e)throw new TypeError("Private static access of wrong provenance");if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=s}(this,o,l,n),s}componentDidMount(){this.translate()}componentDidUpdate(t){t.content!==this.props.content&&this.translate()}translate(){this.constructor.translate(this.props.content).then(t=>{this.setState({loading:!1,html:t})}).catch(t=>{console.error(t),this.setState({loading:!1,html:"<div data-ignore class='error'>Error when rendering markdown content</div>"})})}render(){return this.state.loading?Object(s.h)("p",{"data-ignore":!0},"Loading..."):Object(s.h)("output",a({"data-contents":!0,dangerouslySetInnerHTML:{__html:this.state.html}},this.props.attributes))}}var l={writable:!0,value:Promise.resolve()}},58:function(t,e,n){t.exports=function(){return new Worker(n.p+"cb4cdbc0bec39800bfd9.worker.js")}},59:function(t,e,n){"use strict";var s=n(0),i=n(2);const a="HTMLDialogElement"in window;var r=t=>a?Promise.resolve():Promise.all([n.e(25).then(n.bind(null,64)),n.e(13).then(n.t.bind(null,65,7))]).then(e=>e[0].default.registerDialog(t));n.d(e,"a",function(){return l});const o=t=>t.stopPropagation();class l extends s.a{constructor(...t){var e,n,i;super(...t),e=this,n="dialog",i=Object(s.g)(),n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}componentDidMount(){this.update()}componentDidUpdate(){this.update()}update(){const{current:t}=this.dialog;r(t).then(()=>t&&!t.open&&t.showModal())}render(){return Object(i.c)(Object(s.h)("dialog",{"data-do-not-export":!0,"data-ignore":!0,onClose:this.props.onClose,onClick:o,ref:this.dialog},this.props.children),document.body)}}},61:function(t,e,n){"use strict";n.d(e,"a",function(){return m});var s=n(0),i=n(4),a=n(5),r=n(57),o=n(62);function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t}).apply(this,arguments)}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}const u=new(n.n(o).a),p=[{label:a.a,char:"**",shortcut:"b"},{label:a.f,char:"_",shortcut:"i"},{label:a.h,charAfter:"\n\n- ",selectionAfter:!0},{label:a.g,charBefore:"[",charAfter:"](https://)",selectionAfter:!0,selectionOffset:[2,1],shortcut:"k"}],d=/\n\s*-\s.+$/,f=/\n(\s*)(\d+)\.\s.+$/,b=/\n\s*(-|\d+\.)\s*$/,g=/\n\s*\d\.\s*$/;class m extends s.a{constructor(...t){super(...t),c(this,"state",{active:this.props.initiallyActive}),c(this,"focusPosition",this.props.focusPosition),c(this,"textarea",Object(s.g)()),v.set(this,{writable:!0,value:this.helper.bind(this)}),w.set(this,{writable:!0,value:this.makePrettier.bind(this)}),O.set(this,{writable:!0,value:{contenteditable:"true",className:"editable-markdown-preview",onBlur:this.getCaretPosition.bind(this),onClick:t=>{t.stopImmediatePropagation(),this.setState({active:!0})}}}),j.set(this,{writable:!0,value:Object(s.h)("p",null,Object(s.h)("button",{hidden:!0,type:"button",onClick:()=>{var t;return null===(t=this.textarea.current)||void 0===t?void 0:t.focus()}}),p.map(t=>Object(s.h)("button",{onClick:this.handleCommand(t),accesskey:t.shortcut,type:"button"},Object(s.h)(i.a,{icon:t.label})))," | ",Object(s.h)("button",{accesskey:"s",onClick:()=>this.setState({active:!1})},Object(s.h)(i.a,{icon:a.i})," Preview"))})}static makePrettier(t){let e;const n=new Promise(t=>e=t),s=function(t,e,n){if(t!==e)throw new TypeError("Private static access of wrong provenance");return n.value}(this,m,k).then(()=>new Promise((e,n)=>{u.onmessage=({data:t})=>{e(t)},u.onmessageerror=n,u.onerror=n,u.postMessage(t)})).finally(e);return function(t,e,n,s){if(t!==e)throw new TypeError("Private static access of wrong provenance");if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=s}(this,m,k,n),s}getCaretPosition(t){if(window.getSelection){const{anchorNode:t,anchorOffset:e}=window.getSelection();this.focusPosition={text:t.textContent,offset:e}}}handleCommand(t){return e=>{const{current:n}=this.textarea;if(!n)return;const{selectionStart:s,selectionEnd:i,value:a}=n,r=t.charBefore||t.char||"",o=t.charAfter||t.char||"";if(n.value=a.substring(0,s)+r+a.substring(s,i)+o+a.substring(i),t.selectionAfter)if(t.selectionOffset){const[e,s]=t.selectionOffset;n.setSelectionRange(i+r.length+e,i+r.length+o.length-s)}else n.setSelectionRange(i+o.length,i+o.length);else n.setSelectionRange(s+r.length,i+r.length);this.props.onChange({target:n}),n.focus()}}helper(t){const{value:e,selectionStart:n,selectionEnd:s}=t.target,i=e.lastIndexOf("\n",n-1),a=e.indexOf("\n",s-1),r=e.substring(~i?i:0,~a?a:void 0);if(13===t.keyCode)if(d.test(r))t.preventDefault(),t.target.setRangeText("\n- ",n,s,"end");else if(f.test(r)){t.preventDefault();const[e,i,a]=r.match(f);t.target.setRangeText("\n".concat(i).concat(Number(a)+1,". "),n,s,"end")}else b.test(r)&&t.target.setRangeText("\n",n-3,s,"end");else 9===t.keyCode&&(b.test(r)?(t.preventDefault(),t.target.setRangeText("  - ",n-2-g.test(r),s,"end")):0===r.trim().length&&(t.preventDefault(),t.target.setRangeText(" > ",n,s,"end")))}makePrettier(t){const{current:e}=this.textarea;if(e){const{value:t}=e;this.constructor.makePrettier(t).then(t=>{e.value=t,this.props.onChange({target:e})}).catch(console.warn)}}componentDidMount(){if(this.props.initiallyActive&&this.props.initialFocus){const{current:t}=this.textarea,{text:e,start:n,end:s}=this.props.initialFocus,i=t.value.indexOf(e,n)-n;t.setSelectionRange(i+n,i+s),requestAnimationFrame(()=>t.focus())}}componentDidUpdate(){if(this.focusPosition&&this.textarea.current){const{current:t}=this.textarea,e=t.value.lastIndexOf(this.focusPosition.text)+this.focusPosition.offset;t.setSelectionRange(e,e),this.focusPosition=null}}render(){return this.state.active?Object(s.h)("fieldset",{className:"markdown-editor"},Object(s.h)("legend",null,"Markdown editor"),h(this,j),Object(s.h)("p",null,Object(s.h)("textarea",l({},this.props,{ref:this.textarea,onKeyDown:h(this,v),onBlur:h(this,w),rows:"10",cols:"50"})))):this.props.value?Object(s.h)(r.a,{content:this.props.value,attributes:h(this,O)}):Object(s.h)("p",{onClick:t=>{t.stopImmediatePropagation(),this.setState({active:!0})}},Object(s.h)("em",{style:{fontSize:"smaller"}},"Empty section, click to add content."))}}var v=new WeakMap,w=new WeakMap,O=new WeakMap,j=new WeakMap,k={writable:!0,value:Promise.resolve()}},62:function(t,e,n){t.exports=function(){return new Worker(n.p+"f41fa8374fceb1b006fc.worker.js")}}}]);