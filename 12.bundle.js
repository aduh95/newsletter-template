(window.webpackJsonp=window.webpackJsonp||[]).push([[12,15],{29:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return o});var a=n(0),r=n(30);class o extends a.a{handleDrag({currentTarget:e},t){const n=Array.from(e.parentNode.children),a=n.indexOf(e),r=n.indexOf(t);this.props.handleReOrder(a,r)}render(){const e=this.props.content||[];return Object(a.h)("ol",{className:"ordered-list"},e.concat([{}]).map(({label:t,href:n},o)=>Object(a.h)("li",{draggable:o<e.length,onDragStart:Object(r.a)(this.handleDrag.bind(this)),key:o},Object(a.h)("input",{name:"label",value:t||"",placeholder:"Link label",onChange:e=>this.props.handleChange(e,o)}),Object(a.h)("input",{name:"href",value:n||"",placeholder:"Link URL",onChange:e=>this.props.handleChange(e,o),type:"url"}))))}}},30:function(e,t,n){"use strict";n.d(t,"b",function(){return o});const a="drop-candidate-for-reordering",r=[],o=e=>{document.body.addEventListener("dragover",e),r.push(e)};t.a=e=>t=>{const{target:n}=t,{parentElement:o}=n;let s,i,l;t.dataTransfer.effectAllowed="move",o.style.setProperty("--dragged-element-height",n.offsetHeight+"px");for(const e of r)document.body.removeEventListener("dragover",e);o.classList.add(a);const d=()=>{var e;l=null,null===(e=o.querySelector("."+a))||void 0===e||e.classList.remove(a),s?(n.classList.remove("to-be-deleted"),s!==n&&s.classList.add(a)):n.classList.add("to-be-deleted")},c=e=>{e.stopPropagation(),e.preventDefault(),s=e.currentTarget,l||(l=requestAnimationFrame(d))},h=e=>{e.preventDefault(),s=null,l||(l=requestAnimationFrame(d))},u=e=>{e.stopPropagation(),e.preventDefault(),i=e.currentTarget},p=e=>{e.preventDefault(),i=null};Array.from(o.children,e=>{e.addEventListener("drop",u),e.addEventListener("dragover",c)}),document.body.addEventListener("dragover",h),document.body.addEventListener("drop",p),n.addEventListener("dragend",t=>{Array.from(document.getElementsByClassName(a),e=>e.classList.remove(a)),document.body.removeEventListener("dragover",h),document.body.removeEventListener("drop",p);for(const e of o.children)e.removeEventListener("drop",u),e.removeEventListener("dragover",c);for(const e of r)document.body.addEventListener("dragover",e);void 0!==i&&e(t,i)},{once:!0,passive:!0})}},34:function(e,t,n){"use strict";const a="HTMLDialogElement"in window;t.a=e=>a?Promise.resolve():Promise.all([n.e(26).then(n.bind(null,40)),n.e(17).then(n.t.bind(null,41,7))]).then(t=>t[0].default.registerDialog(e))},35:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});var a=n(0),r=n(29),o=n(34);function s(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}const i=e=>e.stopPropagation();class l extends a.a{constructor(...e){var t,n,r;super(...e),t=this,n="dialog",r=Object(a.g)(),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,d.set(this,{writable:!0,value:this.handleReOrder.bind(this)}),c.set(this,{writable:!0,value:this.handleChange.bind(this)}),h.set(this,{writable:!0,value:this.handleSubmit.bind(this)})}componentWillMount(){const{type:e,title:t,content:n}=this.props;this.setState({type:e,title:t,content:Array.isArray(n)?n.map(e=>({...e})):[]})}componentDidMount(){this.update()}componentDidUpdate(e){this.update(e)}update(e={}){const{current:t}=this.dialog;if(Object(o.a)(t).then(()=>t&&!t.open&&t.showModal()),t&&e.focus!==this.props.focus){const e=this.props.focus,n=null==e?void 0:e.match(/^(.+)\[(\d+)\]$/),a=n?t.querySelectorAll(`input[name=${n[1]}]`).item(n[2]):t.querySelector(`input[name=${e}]`);a&&requestAnimationFrame(()=>{this.props.focusOffset&&a.setSelectionRange(...this.props.focusOffset),a.focus()})}}handleChange(e,t){const{name:n,value:a}=e.target,{content:r}=this.state;t===r.length?r.push({[n]:a}):r[t][n]=a,this.setState({content:r})}handleSubmit(){const e={...this.state};e.content=this.state.content.filter(({label:e,href:t})=>e||t).map(({label:e,href:t})=>({label:e||"[Link]",href:t||"about:blank"})),requestAnimationFrame(()=>this.props.saveState(e))}handleReOrder(e,t){const n=this.state.content;let a=[];-1===t?a=a.concat(n.slice(0,e),n.slice(e+1)):e<t?a=a.concat(n.slice(0,e),n.slice(e+1,t),n.slice(e,1),n.slice(t)):e>t&&(a=a.concat(n.slice(0,t),n.slice(e,e+1),n.slice(t,e),n.slice(e+1))),e!==t&&this.setState({content:a})}render(){return Object(a.h)("dialog",{"data-do-not-export":!0,"data-ignore":!0,onClose:this.props.resetState,onClick:i,ref:this.dialog},Object(a.h)("form",{method:"dialog",onSubmit:s(this,h)},Object(a.h)("div",null,Object(a.h)("label",null,"Title:Â ",Object(a.h)("input",{name:"title",value:this.state.title,onChange:e=>this.setState({title:e.target.value})})),Object(a.h)(r.default,{content:this.state.content,handleChange:s(this,c),handleReOrder:s(this,d)}),Object(a.h)("button",{type:"submit"},"Save"),Object(a.h)("button",{type:"reset",onClick:this.props.resetState},"Cancel"))))}}var d=new WeakMap,c=new WeakMap,h=new WeakMap}}]);