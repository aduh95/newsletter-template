(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{30:function(e,t,r){"use strict";r.d(t,"b",function(){return s});const o="drop-candidate-for-reordering",n=[],s=e=>{document.body.addEventListener("dragover",e),n.push(e)};t.a=e=>t=>{const{target:r}=t,{parentElement:s}=r;let a,i,d;t.dataTransfer.effectAllowed="move",s.style.setProperty("--dragged-element-height",r.offsetHeight+"px");for(const e of n)document.body.removeEventListener("dragover",e);s.classList.add(o);const l=()=>{var e;d=null,null===(e=s.querySelector("."+o))||void 0===e||e.classList.remove(o),a?(r.classList.remove("to-be-deleted"),a!==r&&a.classList.add(o)):r.classList.add("to-be-deleted")},c=e=>{e.stopPropagation(),e.preventDefault(),a=e.currentTarget,d||(d=requestAnimationFrame(l))},h=e=>{e.preventDefault(),a=null,d||(d=requestAnimationFrame(l))},u=e=>{e.stopPropagation(),e.preventDefault(),i=e.currentTarget},p=e=>{e.preventDefault(),i=null};Array.from(s.children,e=>{e.addEventListener("drop",u),e.addEventListener("dragover",c)}),document.body.addEventListener("dragover",h),document.body.addEventListener("drop",p),r.addEventListener("dragend",t=>{Array.from(document.getElementsByClassName(o),e=>e.classList.remove(o)),document.body.removeEventListener("dragover",h),document.body.removeEventListener("drop",p);for(const e of s.children)e.removeEventListener("drop",u),e.removeEventListener("dragover",c);for(const e of n)document.body.addEventListener("dragover",e);void 0!==i&&e(t,i)},{once:!0,passive:!0})}},45:function(e,t,r){},56:function(e,t,r){"use strict";r.r(t);var o=r(0),n=(r(45),r(30));const s="re-order-elements",a="re-order-elements-reordering",i=[],d=e=>{e.preventDefault();const{target:t}=e,{id:r}=t;t.id="re-order-elements-check-children";const o=t.querySelectorAll("#re-order-elements-check-children>[data-type]");var n;o.length?(null===(n=document.getElementById(a))||void 0===n||n.removeAttribute("id"),t.setAttribute("id",a),t.prepend(document.getElementById(s)),h(),Array.from(o).forEach(c),1===o.length?o[0].click():t.scrollIntoViewIfNeeded()):r?t.id=r:t.removeAttribute("id")},l=Object(n.a)(({target:e},t)=>{t?e.parentElement.insertBefore(e,t):e.remove()}),c=e=>{i.push(e),e.addEventListener("click",d),e.addEventListener("dragstart",l),e.draggable=!0},h=()=>{i.forEach(e=>{e.removeEventListener("click",d),e.removeEventListener("dragstart",l),e.draggable=!1}),i.splice(0)};class u extends o.a{componentDidMount(){Array.from(document.querySelectorAll(`#${s}~[data-type]`)).forEach(c)}componentWillUnmount(){var e;h(),null===(e=document.getElementById(a))||void 0===e||e.removeAttribute("id"),document.getElementById(s).remove()}render(){return Object(o.h)("div",{id:s})}}var p=r(31),v=r(32);function b(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}class m extends o.a{constructor(...e){super(...e),f.add(this)}exportHTML(e){return e=e.cloneNode(!0),Array.from(e.querySelectorAll("output[hidden]"),HTMLElement.prototype.remove),["json","ignore","key"].forEach(t=>Array.from(e.querySelectorAll(`[data-${t}]`),e=>e.dataset.removeDataAttr(t))),e.outerHTML}exportJSONFile(){b(this,f,g).call(this,"editorialCalendar.json",JSON.stringify(this.props.editor.data))}exportHTMLFile(){b(this,f,g).call(this,"editorialCalendar.html","TODO")}render(){return Object(o.h)(o.b,null,Object(o.h)("button",{onClick:()=>this.exportJSONFile(),title:"Export as JSON"},Object(o.h)(p.a,{icon:v.b})," Save"),Object(o.h)("button",{onClick:()=>this.exportHTMLFile(),title:"Export as HTML"},Object(o.h)(p.a,{icon:v.c})," Export"))}}var f=new WeakSet,g=function(e,t){const r=document.createElement("a"),o=new File([t],e,{type:"application/json"});r.href=URL.createObjectURL(o),r.download=e,document.body.append(r),r.click(),requestIdleCallback(()=>{URL.revokeObjectURL(r.href),r.remove()})};class y extends o.a{render(){return Object(o.h)("button",{onClick:()=>this.props.editor.setState({reOrder:!this.props.editor.state.reOrder}),style:this.props.editor.state.reOrder?{borderStyle:"inset"}:{},title:"Toggle re-order mode"},Object(o.h)(p.a,{icon:v.j})," Re-order components")}}var O=r(1);class E extends o.a{componentWillMount(){O.a.subscribe(this.update.bind(this)),this.update()}componentWillUnmount(){O.a.unsubscribe(this.update.bind(this))}update(){const{hasPreviousState:e,hasNextState:t}=O.a;e===this.state.hasPreviousState&&t===this.state.hasNextState||this.setState({hasPreviousState:e,hasNextState:t})}render(){return Object(o.h)(o.b,null,Object(o.h)("button",{onClick:()=>O.a.rewindToPreviousState(),disabled:!this.state.hasPreviousState,title:"Cancel last action"},Object(o.h)(p.a,{icon:v.l})," Undo"),Object(o.h)("button",{onClick:()=>O.a.forwardToNextState(),disabled:!this.state.hasNextState,title:"Redo last action"},Object(o.h)(p.a,{icon:v.i})," Redo"))}}class j extends o.a{render(){return Object(o.h)("button",{onClick:()=>O.a.clearCurrentSession(),title:"Close current template"},Object(o.h)(p.a,{icon:v.k})," Close")}}class L extends o.a{componentDidMount(){}render(){return Object(o.h)(o.b,null,Object(o.h)(m,{editor:this.props.editor}),Object(o.h)(E,null)," | ",Object(o.h)(y,{editor:this.props.editor})," | ",Object(o.h)(j,null))}}function k(e,t){var r=t.get(e);if(!r)throw new TypeError("attempted to get private field on non-instance");return r.get?r.get.call(e):r.value}r.d(t,"default",function(){return w});class w extends o.a{constructor(...e){var t,r,o;super(...e),S.set(this,{writable:!0,value:new window.MutationObserver(this.handleMutation.bind(this))}),x.set(this,{writable:!0,value:new WeakMap}),o={hasError:!1,showControls:!1,reOrder:!1},(r="state")in(t=this)?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o}get data(){return k(this,x).get(this)}handleMutation(e,t){let r=!1,o=!1;const n=k(this,x);for(const t of e){const{target:e,type:s}=t;switch(s){case"childList":const{addedNodes:a,removedNodes:i,nextSibling:d}=t;a.length&&Array.from(a).forEach(t=>{if(!t.dataset.ignore){if(console.log("add",t),n.has(t)||this.observeNode(t),d){var r;const o=null===(r=n.get(e))||void 0===r?void 0:r.content,s=null==o?void 0:o.indexOf(n.get(d));o&&-1!==s&&o.splice(s,0,n.get(t))}else{var s;null===(s=n.get(e))||void 0===s||s.content.push(n.get(t))}o=!0}}),i.length&&Array.from(i).forEach(t=>{var r;if(t.dataset.ignore)return;console.log("remove",t);const s=null===(r=n.get(e))||void 0===r?void 0:r.content,a=null==s?void 0:s.indexOf(n.get(t));s&&-1!==a&&s.splice(a,1),o=!0});break;case"characterData":let l=e;for(;l.parentElement.isContentEditable;)l=l.parentElement;const{dataset:c,textContent:h}=l;for(;!k(this,x).has(l);)l=l.parentElement;k(this,x).get(l)[c.key]=h,o=!0;break;case"attributes":if("data-json"===t.attributeName){const t=k(this,x).get(e);Object.keys(t).forEach(e=>{t[e]=void 0}),Object.assign(t,JSON.parse(e.dataset.json)),o=!0,r=!0}}}o&&this.props.onChange(n.get(this),r)}observeNode(e){const{ignore:t,type:r,json:o}=e.dataset;if(!t){if(o)return k(this,S).observe(e,{attributes:!0}),k(this,x).set(e,JSON.parse(o));r&&(k(this,S).observe(e,{childList:!0}),k(this,x).set(e,{type:r,content:[]})),e.childElementCount&&Array.from(e.children).forEach(t=>{const{ignore:r,key:o}=t.dataset;if(r);else if(o)Array.from(t.childNodes).forEach(e=>k(this,S).observe(e,{characterData:!0})),k(this,x).get(e)[o]=t.textContent,t.contentEditable=!0;else{var n,s;this.observeNode(t),null===(n=k(this,x).get(e))||void 0===n||null===(s=n.content)||void 0===s||s.push(k(this,x).get(t))}})}}observeNodeDeep(e){var t;if(e.dataset.contents)return Array.from(e.children,this.observeNodeDeep.bind(this));this.observeNode(e),k(this,x).get(this)[e.dataset.type]=null===(t=k(this,x).get(e))||void 0===t?void 0:t.content}componentDidMount(){k(this,x).set(this,{}),requestIdleCallback(this.checkForDOMChanges.bind(this))}checkForDOMChanges(){console.log("updated");for(const e of document.querySelectorAll("[data-watch]"))k(this,x).has(e)||this.observeNodeDeep(e)}componentDidUpdate(){requestIdleCallback(()=>this.checkForDOMChanges())}componentWillUnmount(){k(this,S).disconnect()}componentDidCatch(e,t){console.warn(e,t)}render(){for(const e of this.props.children)e.props["data-watch"]=!0;return Object(o.h)(o.b,null,Object(o.h)("header",null,Object(o.h)("h1",null,this.props.title),Object(o.h)(L,{editor:this})),this.state.reOrder?Object(o.h)(u,null):null,this.props.children)}}var S=new WeakMap,x=new WeakMap}}]);