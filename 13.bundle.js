(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{30:function(e,t,r){"use strict";r.d(t,"b",function(){return a});const n="drop-candidate-for-reordering",o=[],a=e=>{document.body.addEventListener("dragover",e),o.push(e)};t.a=e=>t=>{const{target:r}=t,{parentElement:a}=r;let s,i,d;t.dataTransfer.effectAllowed="move",a.style.setProperty("--dragged-element-height",r.offsetHeight+"px");for(const e of o)document.body.removeEventListener("dragover",e);a.classList.add(n);const c=()=>{var e;d=null,null===(e=a.querySelector("."+n))||void 0===e||e.classList.remove(n),s?(r.classList.remove("to-be-deleted"),s!==r&&s.classList.add(n)):r.classList.add("to-be-deleted")},l=e=>{e.stopPropagation(),e.preventDefault(),s=e.currentTarget,d||(d=requestAnimationFrame(c))},h=e=>{e.preventDefault(),s=null,d||(d=requestAnimationFrame(c))},u=e=>{e.stopPropagation(),e.preventDefault(),i=e.currentTarget},p=e=>{e.preventDefault(),i=null};Array.from(a.children,e=>{e.addEventListener("drop",u),e.addEventListener("dragover",l)}),document.body.addEventListener("dragover",h),document.body.addEventListener("drop",p),r.addEventListener("dragend",t=>{Array.from(document.getElementsByClassName(n),e=>e.classList.remove(n)),document.body.removeEventListener("dragover",h),document.body.removeEventListener("drop",p);for(const e of a.children)e.removeEventListener("drop",u),e.removeEventListener("dragover",l);for(const e of o)document.body.addEventListener("dragover",e);void 0!==i&&e(t,i)},{once:!0,passive:!0})}},46:function(e,t,r){},57:function(e,t,r){"use strict";r.r(t);var n=r(0),o=(r(46),r(30));const a="re-order-elements",s="re-order-elements-reordering",i=[],d=e=>{e.preventDefault();const{target:t}=e,{id:r}=t;t.id="re-order-elements-check-children";const n=t.querySelectorAll("#re-order-elements-check-children>[data-type]");n.length?(Array.from(document.getElementsByClassName(s)).forEach(e=>e.classList.remove(s)),t.classList.add(s),t.prepend(document.getElementById(a)),h(),Array.from(n).forEach(l),1===n.length?n[0].click():t.scrollIntoView({behavior:"smooth",block:"center"})):r?t.id=r:t.removeAttribute("id")},c=Object(o.a)(({target:e},t)=>{t?e.parentElement.insertBefore(e,t):e.remove()}),l=e=>{i.push(e),e.addEventListener("click",d),e.addEventListener("dragstart",c),e.draggable=!0},h=()=>{i.forEach(e=>{e.removeEventListener("click",d),e.removeEventListener("dragstart",c),e.draggable=!1}),i.splice(0)};class u extends n.a{componentDidMount(){Array.from(document.querySelectorAll(`#${a}~[data-type]`)).forEach(l)}componentWillUnmount(){h(),Array.from(document.getElementsByClassName(s)).forEach(e=>e.classList.remove(s)),document.getElementById(a).remove()}render(){return Object(n.h)("div",{"data-ignore":!0,"data-do-not-export":!0,id:a})}}var p=r(31),b=r(32);function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}const f=e=>{if("OUTPUT"===e.nodeName||e.hasAttribute("data-do-not-export"))return document.createDocumentFragment();const t=e.cloneNode(!1);if(e.attributes){for(const{name:r}of e.attributes)r.startsWith("data-")&&t.removeAttribute(r);t.removeAttribute("contenteditable")}for(const r of e.childNodes)t.appendChild(f(r));return t};class g extends n.a{constructor(...e){super(...e),O.add(this),y.add(this),v(this,"exportJSONFile",()=>m(this,O,w).call(this,"editorialCalendar.json",[JSON.stringify(this.props.editor.data)])),v(this,"exportHTMLFile",()=>m(this,O,w).call(this,"editorialCalendar.html",m(this,y,E).call(this)))}render(){return Object(n.h)(n.b,null,Object(n.h)("button",{onClick:this.exportJSONFile,title:"Export as JSON"},Object(n.h)(p.a,{icon:b.b})," Save"),Object(n.h)("button",{onClick:this.exportHTMLFile,title:"Export as HTML"},Object(n.h)(p.a,{icon:b.c})," Export"))}}var y=new WeakSet,O=new WeakSet,E=function(){const e=document.querySelectorAll("[data-watch]");return Array.from(e,f).map(e=>e.outerHTML)},w=function(e,t){const r=document.createElement("a"),n=new File(t,e,{type:"application/json"});r.href=URL.createObjectURL(n),r.download=e,document.body.append(r),r.click(),requestIdleCallback(()=>{URL.revokeObjectURL(r.href),r.remove()})};function j(e,t){var r=t.get(e);if(!r)throw new TypeError("attempted to get private field on non-instance");return r.get?r.get.call(e):r.value}class L extends n.a{constructor(...e){super(...e),k.set(this,{writable:!0,value:()=>this.props.editor.setState(e=>{if(!e.reOrder)return{reOrder:!0};this.props.editor.commitChanges()})})}render(){return Object(n.h)("button",{onClick:j(this,k),style:this.props.editor.state.reOrder?{borderStyle:"inset"}:{},title:"Toggle re-order mode"},Object(n.h)(p.a,{icon:b.j})," Re-order components")}}var k=new WeakMap,C=r(1);const S=C.a.rewindToPreviousState.bind(C.a),N=C.a.forwardToNextState.bind(C.a);class x extends n.a{componentWillMount(){C.a.subscribe(this.update.bind(this)),this.update()}componentWillUnmount(){C.a.unsubscribe(this.update.bind(this))}update(){const{hasPreviousState:e,hasNextState:t}=C.a;e===this.state.hasPreviousState&&t===this.state.hasNextState||this.setState({hasPreviousState:e,hasNextState:t})}render(){return Object(n.h)(n.b,null,Object(n.h)("button",{onClick:S,disabled:!this.state.hasPreviousState,title:"Cancel last action"},Object(n.h)(p.a,{icon:b.l})," Undo"),Object(n.h)("button",{onClick:N,disabled:!this.state.hasNextState,title:"Redo last action"},Object(n.h)(p.a,{icon:b.i})," Redo"))}}const A=C.a.clearCurrentSession.bind(C.a);class D extends n.a{render(){return Object(n.h)("button",{onClick:A,title:"Close current template"},Object(n.h)(p.a,{icon:b.k})," Close")}}class M extends n.a{componentDidMount(){}render(){return Object(n.h)(n.b,null,Object(n.h)(g,{editor:this.props.editor}),Object(n.h)(x,null)," | ",Object(n.h)(L,{editor:this.props.editor})," | ",Object(n.h)(D,null))}}function T(e,t){var r=t.get(e);if(!r)throw new TypeError("attempted to get private field on non-instance");return r.get?r.get.call(e):r.value}r.d(t,"default",function(){return q});class q extends n.a{constructor(...e){var t,r,n;super(...e),F.set(this,{writable:!0,value:new window.MutationObserver(this.handleMutation.bind(this))}),P.set(this,{writable:!0,value:new WeakMap}),n={hasError:!1,showControls:!1,reOrder:!1},(r="state")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}get data(){return T(this,P).get(this)}commitChanges(){this.props.onChange(this.data)}handleMutation(e,t){let r=!1,n=!1;const o=T(this,P);for(const t of e){const{target:e,type:a}=t;switch(a){case"childList":const{addedNodes:s,removedNodes:i,nextSibling:d}=t;s.length&&Array.from(s).forEach(t=>{if(!t.dataset.ignore){if(o.has(t)||this.observeNode(t),d&&o.has(d)){var a;console.log("add in between",t);const r=null===(a=o.get(e))||void 0===a?void 0:a.content,n=null==r?void 0:r.indexOf(o.get(d));r&&-1!==n&&r.splice(n,0,o.get(t))}else{var s;console.log("append",t),null===(s=o.get(e))||void 0===s||s.content.push(o.get(t))}n=!0,t.dataset.requestRender&&(r=!0)}}),i.length&&Array.from(i).forEach(t=>{var r;if(t.dataset.ignore)return;console.log("remove",t);const a=null===(r=o.get(e))||void 0===r?void 0:r.content,s=null==a?void 0:a.indexOf(o.get(t));a&&-1!==s&&a.splice(s,1),n=!0});break;case"characterData":let c=e;for(;c.parentElement.isContentEditable;)c=c.parentElement;const{dataset:l,textContent:h}=c;for(;!T(this,P).has(c);)c=c.parentElement;T(this,P).get(c)[l.key]=h,n=!0;break;case"attributes":if("data-json"===t.attributeName){const t=T(this,P).get(e);Object.keys(t).forEach(e=>{t[e]=void 0}),Object.assign(t,JSON.parse(e.dataset.json)),n=!0,r=!0}}}n&&this.props.onChange(o.get(this),r)}observeNode(e){const{ignore:t,type:r,json:n}=e.dataset;if(!t){if(n)return T(this,F).observe(e,{attributes:!0}),T(this,P).set(e,JSON.parse(n));r&&(T(this,F).observe(e,{childList:!0}),T(this,P).set(e,{type:r,content:[]})),e.childElementCount&&Array.from(e.children).forEach(t=>{const{ignore:r,key:n}=t.dataset;if(r);else if(n)Array.from(t.childNodes).forEach(e=>T(this,F).observe(e,{characterData:!0})),T(this,P).get(e)[n]=t.textContent,t.contentEditable=!0;else{var o,a;this.observeNode(t),null===(o=T(this,P).get(e))||void 0===o||null===(a=o.content)||void 0===a||a.push(T(this,P).get(t))}})}}observeNodeDeep(e){var t;if(e.dataset.contents)return Array.from(e.children,this.observeNodeDeep.bind(this));this.observeNode(e),T(this,P).get(this)[e.dataset.type]=null===(t=T(this,P).get(e))||void 0===t?void 0:t.content}componentDidMount(){T(this,P).set(this,{}),requestIdleCallback(this.checkForDOMChanges.bind(this))}checkForDOMChanges(){console.log("updated");for(const e of document.querySelectorAll("[data-watch]"))T(this,P).has(e)||this.observeNodeDeep(e)}componentDidUpdate(){requestIdleCallback(this.checkForDOMChanges.bind(this))}componentWillUnmount(){T(this,F).disconnect()}componentDidCatch(e,t){console.warn(e,t)}render(){for(const e of this.props.children)e.props["data-watch"]=!0;return Object(n.h)(n.b,null,Object(n.h)("header",null,Object(n.h)("h1",null,this.props.title),Object(n.h)(M,{editor:this})),this.state.reOrder?Object(n.h)(u,null):null,this.props.children)}}var F=new WeakMap,P=new WeakMap}}]);