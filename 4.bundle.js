(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{43:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return c});var r=n(0),s=n(61),o=n(59);function i(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var a=0;class c extends r.a{constructor(...t){super(...t),Object.defineProperty(this,l,{writable:!0,value:this.handleSubmit.bind(this)}),this.state={type:this.props.type,text:this.props.text}}handleSubmit(){const t={...this.state};requestIdleCallback(()=>this.props.saveState(t))}render(){return Object(r.h)(o.a,{onClose:this.props.resetState},Object(r.h)("form",{method:"dialog",onSubmit:i(this,l)[l]},Object(r.h)("div",null,Object(r.h)("label",null,"Footer: ",Object(r.h)(s.a,{name:"description",value:this.state.text,onChange:t=>this.setState({text:t.target.value}),initialFocus:this.props.focusPosition,initiallyActive:!0})),Object(r.h)("button",{type:"submit"},"Save"),Object(r.h)("button",{type:"reset",onClick:this.props.resetState},"Cancel"))))}}var l="__private_"+a+++"_"+"handleSubmit"},57:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(0),s=n(58);function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function i(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var a=0;const c=new(n.n(s).a);class l extends r.a{constructor(...t){super(...t),this.state={loading:!0}}static translate(t){let e;const n=new Promise(t=>e=t),r=i(this,h)[h].then(()=>new Promise((e,n)=>{c.onmessage=({data:t})=>{e(t)},c.onmessageerror=n,c.onerror=n,c.postMessage(t)})).finally(e);return i(this,h)[h]=n,r}componentDidMount(){this.translate()}componentDidUpdate(t){t.content!==this.props.content&&this.translate()}translate(){this.constructor.translate(this.props.content).then(t=>{this.setState({loading:!1,html:t})}).catch(t=>{console.error(t),this.setState({loading:!1,html:"<div data-ignore class='error'>Error when rendering markdown content</div>"})})}render(){return this.state.loading?Object(r.h)("p",{"data-ignore":!0},"Loading..."):Object(r.h)("output",o({"data-contents":!0,dangerouslySetInnerHTML:{__html:this.state.html}},this.props.attributes))}}var h="__private_"+a+++"_"+"translationJobs";Object.defineProperty(l,h,{writable:!0,value:Promise.resolve()})},58:function(t,e,n){t.exports=function(){return new Worker(n.p+"cb4cdbc0bec39800bfd9.worker.js")}},59:function(t,e,n){"use strict";var r=n(0),s=n(2);const o="HTMLDialogElement"in window;var i=t=>o?Promise.resolve():Promise.all([n.e(24).then(n.bind(null,64)),n.e(13).then(n.t.bind(null,65,7))]).then(e=>e[0].default.registerDialog(t));n.d(e,"a",function(){return c});const a=t=>t.stopPropagation();class c extends r.a{constructor(...t){super(...t),this.dialog=Object(r.g)()}componentDidMount(){this.update()}componentDidUpdate(){this.update()}update(){const{current:t}=this.dialog;i(t).then(()=>t&&!t.open&&t.showModal())}render(){return Object(s.c)(Object(r.h)("dialog",{"data-do-not-export":!0,"data-ignore":!0,onClose:this.props.onClose,onClick:a,ref:this.dialog},this.props.children),document.body)}}},61:function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n(0),s=n(4),o=n(5),i=n(57),a=n(62);function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function l(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var h=0;function u(t){return"__private_"+h+++"_"+t}const p=new(n.n(a).a),d=[{label:o.a,char:"**",shortcut:"b"},{label:o.f,char:"_",shortcut:"i"},{label:o.h,charAfter:"\n\n- ",selectionAfter:!0},{label:o.g,charBefore:"[",charAfter:"](https://)",selectionAfter:!0,selectionOffset:[2,1],shortcut:"k"}],f=/\n\s*-\s.+$/,b=/\n(\s*)(\d+)\.\s.+$/,g=/\n\s*(-|\d+\.)\s*$/,v=/\n\s*\d\.\s*$/;class m extends r.a{constructor(...t){super(...t),this.state={active:this.props.initiallyActive},this.focusPosition=this.props.focusPosition,this.textarea=Object(r.g)(),Object.defineProperty(this,w,{writable:!0,value:this.helper.bind(this)}),Object.defineProperty(this,j,{writable:!0,value:this.makePrettier.bind(this)}),Object.defineProperty(this,y,{writable:!0,value:{contenteditable:"true",className:"editable-markdown-preview",onBlur:this.getCaretPosition.bind(this),onClick:t=>{t.stopImmediatePropagation(),this.setState({active:!0})}}}),Object.defineProperty(this,P,{writable:!0,value:Object(r.h)("p",null,Object(r.h)("button",{hidden:!0,type:"button",onClick:()=>{var t;return null===(t=this.textarea.current)||void 0===t?void 0:t.focus()}}),d.map(t=>Object(r.h)("button",{onClick:this.handleCommand(t),accesskey:t.shortcut,type:"button"},Object(r.h)(s.a,{icon:t.label})))," | ",Object(r.h)("button",{accesskey:"s",onClick:()=>this.setState({active:!1})},Object(r.h)(s.a,{icon:o.i})," Preview"))})}static makePrettier(t){let e;const n=new Promise(t=>e=t),r=l(this,O)[O].then(()=>new Promise((e,n)=>{p.onmessage=({data:t})=>{e(t)},p.onmessageerror=n,p.onerror=n,p.postMessage(t)})).finally(e);return l(this,O)[O]=n,r}getCaretPosition(t){if(window.getSelection){const{anchorNode:t,anchorOffset:e}=window.getSelection();this.focusPosition={text:t.textContent,offset:e}}}handleCommand(t){return e=>{const{current:n}=this.textarea;if(!n)return;const{selectionStart:r,selectionEnd:s,value:o}=n,i=t.charBefore||t.char||"",a=t.charAfter||t.char||"";if(n.value=o.substring(0,r)+i+o.substring(r,s)+a+o.substring(s),t.selectionAfter)if(t.selectionOffset){const[e,r]=t.selectionOffset;n.setSelectionRange(s+i.length+e,s+i.length+a.length-r)}else n.setSelectionRange(s+a.length,s+a.length);else n.setSelectionRange(r+i.length,s+i.length);this.props.onChange({target:n}),n.focus()}}helper(t){const{value:e,selectionStart:n,selectionEnd:r}=t.target,s=e.lastIndexOf("\n",n-1),o=e.indexOf("\n",r-1),i=e.substring(~s?s:0,~o?o:void 0);if(13===t.keyCode)if(f.test(i))t.preventDefault(),t.target.setRangeText("\n- ",n,r,"end");else if(b.test(i)){t.preventDefault();const[e,s,o]=i.match(b);t.target.setRangeText("\n".concat(s).concat(Number(o)+1,". "),n,r,"end")}else g.test(i)&&t.target.setRangeText("\n",n-3,r,"end");else 9===t.keyCode&&(g.test(i)?(t.preventDefault(),t.target.setRangeText("  - ",n-2-v.test(i),r,"end")):0===i.trim().length&&(t.preventDefault(),t.target.setRangeText(" > ",n,r,"end")))}makePrettier(t){const{current:e}=this.textarea;if(e){const{value:t}=e;this.constructor.makePrettier(t).then(t=>{e.value=t,this.props.onChange({target:e})}).catch(console.warn)}}componentDidMount(){if(this.props.initiallyActive&&this.props.initialFocus){const{current:t}=this.textarea,{text:e,start:n,end:r}=this.props.initialFocus,s=t.value.indexOf(e,n)-n;t.setSelectionRange(s+n,s+r),requestAnimationFrame(()=>t.focus())}}componentDidUpdate(){if(this.focusPosition&&this.textarea.current){const{current:t}=this.textarea,e=t.value.lastIndexOf(this.focusPosition.text)+this.focusPosition.offset;t.setSelectionRange(e,e),this.focusPosition=null}}render(){return this.state.active?Object(r.h)("fieldset",{className:"markdown-editor"},Object(r.h)("legend",null,"Markdown editor"),l(this,P)[P],Object(r.h)("p",null,Object(r.h)("textarea",c({},this.props,{ref:this.textarea,onKeyDown:l(this,w)[w],onBlur:l(this,j)[j],rows:"10",cols:"50"})))):this.props.value?Object(r.h)(i.a,{content:this.props.value,attributes:l(this,y)[y]}):Object(r.h)("p",{onClick:t=>{t.stopImmediatePropagation(),this.setState({active:!0})}},Object(r.h)("em",{style:{fontSize:"smaller"}},"Empty section, click to add content."))}}var O=u("prettierJobs"),w=u("helper"),j=u("makePrettier"),y=u("markdownContentAttributes"),P=u("actionBar");Object.defineProperty(m,O,{writable:!0,value:Promise.resolve()})},62:function(t,e,n){t.exports=function(){return new Worker(n.p+"f41fa8374fceb1b006fc.worker.js")}}}]);