(window.webpackJsonp=window.webpackJsonp||[]).push([[4,15],{25:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),o=n(26);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const a=new(n.n(o).a);class i extends r.a{constructor(...e){var t,n,r;super(...e),r={loading:!0},(n="state")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}static translate(e){let t;const n=new Promise(e=>t=e),r=function(e,t,n){if(e!==t)throw new TypeError("Private static access of wrong provenance");return n.value}(this,i,c).then(()=>new Promise((t,n)=>{a.onmessage=({data:e})=>{t(e)},a.onmessageerror=n,a.onerror=n,a.postMessage(e)})).finally(t);return function(e,t,n,r){if(e!==t)throw new TypeError("Private static access of wrong provenance");if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=r}(this,i,c,n),r}componentDidMount(){this.translate()}componentDidUpdate(e){e.content!==this.props.content&&this.translate()}translate(){this.constructor.translate(this.props.content).then(e=>{this.setState({loading:!1,html:e})}).catch(e=>{console.error(e),this.setState({loading:!1,html:"<div data-ignore class='error'>Error when rendering markdown content</div>"})})}render(){return this.state.loading?Object(r.h)("p",{"data-ignore":!0},"Loading..."):Object(r.h)("output",s({"data-contents":!0,dangerouslySetInnerHTML:{__html:this.state.html}},this.props.attributes))}}var c={writable:!0,value:Promise.resolve()}},26:function(e,t,n){e.exports=function(){return new Worker(n.p+"25e8b5bb6f306b1d55e5.worker.js")}},27:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n(0),o=n(28);class s extends r.a{handleDrag({currentTarget:e},t){const n=Array.from(e.parentNode.children),r=n.indexOf(e),o=n.indexOf(t);this.props.handleReOrder(r,o)}render(){const e=this.props.content||[];return Object(r.h)("ol",{className:"ordered-list"},e.concat([{}]).map(({label:t,href:n},s)=>Object(r.h)("li",{draggable:s<e.length,onDragStart:Object(o.a)(this.handleDrag.bind(this)),key:s},Object(r.h)("input",{name:"label",value:t||"",placeholder:"Link label",onChange:e=>this.props.handleChange(e,s)}),Object(r.h)("input",{name:"href",value:n||"",placeholder:"Link URL",onChange:e=>this.props.handleChange(e,s),type:"url"}))))}}},28:function(e,t,n){"use strict";n.d(t,"b",function(){return s});const r="drop-candidate-for-reordering",o=[],s=e=>{document.body.addEventListener("dragover",e),o.push(e)};t.a=e=>t=>{const{target:n}=t,{parentElement:s}=n;let a,i,c;t.dataTransfer.effectAllowed="move",s.style.setProperty("--dragged-element-height",n.offsetHeight+"px");for(const e of o)document.body.removeEventListener("dragover",e);s.classList.add(r);const l=()=>{var e;c=null,null===(e=s.querySelector("."+r))||void 0===e||e.classList.remove(r),a?(n.classList.remove("to-be-deleted"),a!==n&&a.classList.add(r)):n.classList.add("to-be-deleted")},d=e=>{e.stopPropagation(),e.preventDefault(),a=e.currentTarget,c||(c=requestAnimationFrame(l))},h=e=>{e.preventDefault(),a=null,c||(c=requestAnimationFrame(l))},u=e=>{e.stopPropagation(),e.preventDefault(),i=e.currentTarget},p=e=>{e.preventDefault(),i=null};Array.from(s.children,e=>{e.addEventListener("drop",u),e.addEventListener("dragover",d)}),document.body.addEventListener("dragover",h),document.body.addEventListener("drop",p),n.addEventListener("dragend",t=>{Array.from(document.getElementsByClassName(r),e=>e.classList.remove(r)),document.body.removeEventListener("dragover",h),document.body.removeEventListener("drop",p);for(const e of s.children)e.removeEventListener("drop",u),e.removeEventListener("dragover",d);for(const e of o)document.body.addEventListener("dragover",e);void 0!==i&&e(t,i)},{once:!0,passive:!0})}},32:function(e,t,n){"use strict";const r="HTMLDialogElement"in window;t.a=e=>r?Promise.resolve():Promise.all([n.e(25).then(n.bind(null,38)),n.e(17).then(n.t.bind(null,39,7))]).then(t=>t[0].default.registerDialog(e))},34:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var r=n(0),o=(n(27),n(40)),s=n(32);class a extends r.a{constructor(...e){var t,n,o;super(...e),t=this,n="dialog",o=Object(r.g)(),n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o}componentWillMount(){const{type:e,text:t}=this.props;this.setState({type:e,text:t})}componentDidMount(){this.update()}componentDidUpdate(e){this.update(e)}update(e={}){const{current:t}=this.dialog;Object(s.a)(t).then(()=>t&&!t.open&&t.showModal())}handleSubmit(){const e={...this.state};requestIdleCallback(()=>this.props.saveState(e))}onReset(e){e.stopPropagation(),this.props.resetState()}render(){return Object(r.h)("dialog",{"data-ignore":!0,onClose:this.onReset.bind(this),onClick:e=>e.stopPropagation(),ref:this.dialog},Object(r.h)("form",{method:"dialog",onSubmit:this.handleSubmit.bind(this)},Object(r.h)("div",null,Object(r.h)("label",null,"Footer: ",Object(r.h)(o.a,{name:"description",value:this.state.text,onChange:e=>this.setState({text:e.target.value}),initiallyActive:!0})),Object(r.h)("button",{type:"submit"},"Save"),Object(r.h)("button",{type:"reset",onClick:this.onReset.bind(this)},"Cancel"))))}}},40:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n(0),o=n(30),s=n(31),a=n(25),i=n(41);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=new(n.n(i).a),h=[{label:s.a,char:"**",shortcut:"b"},{label:s.d,char:"_",shortcut:"i"},{label:s.f,charAfter:"\n\n- ",selectionAfter:!0},{label:s.e,charBefore:"[",charAfter:"](https://)",selectionAfter:!0,selectionOffset:[2,1],shortcut:"k"}],u=/\n\s*-\s.+$/,p=/\n(\s*)(\d+)\.\s.+$/,f=/\n\s*(-|\d+\.)\s*$/,g=/\n\s*\d\.\s*$/;class b extends r.a{constructor(...e){super(...e),l(this,"state",{active:this.props.initiallyActive}),l(this,"textarea",Object(r.g)())}static makePrettier(e){let t;const n=new Promise(e=>t=e),r=function(e,t,n){if(e!==t)throw new TypeError("Private static access of wrong provenance");return n.value}(this,b,v).then(()=>new Promise((t,n)=>{d.onmessage=({data:e})=>{t(e)},d.onmessageerror=n,d.onerror=n,d.postMessage(e)})).finally(t);return function(e,t,n,r){if(e!==t)throw new TypeError("Private static access of wrong provenance");if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=r}(this,b,v,n),r}getCaretPosition(e){if(window.getSelection){const{anchorNode:e,anchorOffset:t}=window.getSelection();this.focusPosition={text:e.textContent,offset:t}}}handleCommand(e){return t=>{const{current:n}=this.textarea;if(!n)return;const{selectionStart:r,selectionEnd:o,value:s}=n,a=e.charBefore||e.char||"",i=e.charAfter||e.char||"";if(n.value=s.substring(0,r)+a+s.substring(r,o)+i+s.substring(o),e.selectionAfter)if(e.selectionOffset){const[t,r]=e.selectionOffset;n.setSelectionRange(o+a.length+t,o+a.length+i.length-r)}else n.setSelectionRange(o+i.length,o+i.length);else n.setSelectionRange(r+a.length,o+a.length);this.props.onChange({target:n}),n.focus()}}helper(e){const{value:t,selectionStart:n,selectionEnd:r}=e.target,o=t.lastIndexOf("\n",n-1),s=t.indexOf("\n",r-1),a=t.substring(~o?o:0,~s?s:void 0);if(13===e.keyCode)if(u.test(a))e.preventDefault(),e.target.setRangeText("\n- ",n,r,"end");else if(p.test(a)){e.preventDefault();const[t,o,s]=a.match(p);e.target.setRangeText(`\n${o}${Number(s)+1}. `,n,r,"end")}else f.test(a)&&e.target.setRangeText("\n",n-3,r,"end");else 9===e.keyCode&&(f.test(a)?(e.preventDefault(),e.target.setRangeText("  - ",n-2-g.test(a),r,"end")):0===a.trim().length&&(e.preventDefault(),e.target.setRangeText(" > ",n,r,"end")))}makePrettier(e){const{current:t}=this.textarea;if(t){const{value:e}=t;this.constructor.makePrettier(e).then(e=>{t.value=e,this.props.onChange({target:t})}).catch(console.warn)}}componentDidUpdate(){if(this.focusPosition&&this.textarea.current){const{current:e}=this.textarea,t=e.value.lastIndexOf(this.focusPosition.text)+this.focusPosition.offset;e.setSelectionRange(t,t),this.focusPosition=null}}render(){return this.state.active?Object(r.h)("fieldset",{className:"markdown-editor"},Object(r.h)("legend",null,"Markdown editor"),Object(r.h)("p",null,Object(r.h)("button",{hidden:!0,type:"button",onClick:()=>{var e;return null===(e=this.textarea.current)||void 0===e?void 0:e.focus()}}),h.map(e=>Object(r.h)("button",{onClick:this.handleCommand(e),accesskey:e.shortcut,type:"button"},Object(r.h)(o.a,{icon:e.label})))," | ",Object(r.h)("button",{accesskey:"s",onClick:()=>this.setState({active:!1})},Object(r.h)(o.a,{icon:s.h})," Preview")),Object(r.h)("p",null,Object(r.h)("textarea",c({},this.props,{ref:this.textarea,onKeyDown:this.helper.bind(this),onBlur:this.makePrettier.bind(this),rows:"10",cols:"50"})))):Object(r.h)(a.a,{content:this.props.value,attributes:{contenteditable:"true",style:"display:initial",onBlur:this.getCaretPosition.bind(this),onClick:e=>{e.stopImmediatePropagation(),this.setState({active:!0})}}})}}var v={writable:!0,value:Promise.resolve()}},41:function(e,t,n){e.exports=function(){return new Worker(n.p+"adfb402c072b1a1540cb.worker.js")}}}]);