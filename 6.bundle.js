(window.webpackJsonp=window.webpackJsonp||[]).push([[6,1,3,20,27],{14:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return a}));var n=r(0),s=r(1),o=r(17);const i=new Map;function a({active:e,componentName:t,props:a}){i.has(t)||i.set(t,Object(s.d)(()=>r(16)("./".concat(t,".js"))));const c=i.get(t);return Object(n.h)(s.b,{fallback:Object(n.h)(o.a,null)},e?Object(n.h)(c,a):null)}},15:function(e,t,r){"use strict";r.r(t);var n,s,o=r(6);function i(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var a=0;t.default=new(n=class extends o.a{constructor(...e){super(...e),Object.defineProperty(this,s,{writable:!0,value:void 0})}set(e){if(e!==i(this,s)[s]){try{i(this,s)[s]=new URL(e||"about:blank").hostname}catch(e){console.warn(e),i(this,s)[s]=""}this.notify(i(this,s)[s])}}get(){return i(this,s)[s]}getAsURL(){return i(this,s)[s]?new URL("".concat(location.protocol,"//").concat(i(this,s)[s])):null}getHostNameRegExp(e){return new RegExp("(https?:)?//".concat(i(this,s)[s],"/?"),e)}},s="__private_"+a+++"_"+"currentName",n)},16:function(e,t,r){var n={"./AddComponent.js":[24,34],"./AsideList.js":[30,15],"./Footer.js":[31,2,11],"./NewsletterArticle.js":[32,2,7],"./NewsletterSection.js":[33,19],"./OrderedList.js":[20,24],"./TemplateSettings.js":[34,17],"./lazy-edit-component.js":[14,20],"./normalizeURL.js":[19,22]};function s(e){if(!r.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],s=t[0];return Promise.all(t.slice(1).map(r.e)).then((function(){return r(s)}))}s.keys=function(){return Object.keys(n)},s.id=16,e.exports=s},17:function(e,t,r){"use strict";var n=r(0),s=r(1);function o(e){e.target.close()}t.a=Object(s.e)((function(){return Object(s.c)(Object(n.h)("dialog",{"data-do-not-export":!0,open:!0,"data-ignore":!0,class:"loading",onClick:o},"Loading..."),document.body)}))},25:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return i}));const n="drop-candidate-for-reordering",s=new Set,o=e=>{document.body.addEventListener("dragover",e),s.add(e)},i=e=>{document.body.removeEventListener("dragover",e),s.delete(e)};t.a=e=>t=>{const{target:r}=t,{parentElement:o}=r;let i,a,c;t.dataTransfer.effectAllowed="move",o.style.setProperty("--dragged-element-height",r.offsetHeight+"px");for(const e of s)document.body.removeEventListener("dragover",e);o.classList.add(n);const d=()=>{var e;c=null,null===(e=o.querySelector("."+n))||void 0===e||e.classList.remove(n),i?(r.classList.remove("to-be-deleted"),i!==r&&i.classList.add(n)):r.classList.add("to-be-deleted")},l=e=>{e.stopPropagation(),e.preventDefault(),i=e.currentTarget,c||(c=requestAnimationFrame(d))},u=e=>{e.preventDefault(),i=null,c||(c=requestAnimationFrame(d))},h=e=>{e.stopPropagation(),e.preventDefault(),a=e.currentTarget},p=e=>{e.preventDefault(),a=null};Array.from(o.children,e=>{e.addEventListener("drop",h),e.addEventListener("dragover",l)}),document.body.addEventListener("dragover",u),document.body.addEventListener("drop",p),r.addEventListener("dragend",t=>{Array.from(document.getElementsByClassName(n),e=>e.classList.remove(n)),document.body.removeEventListener("dragover",u),document.body.removeEventListener("drop",p);for(const e of o.children)e.removeEventListener("drop",h),e.removeEventListener("dragover",l);for(const e of s)document.body.addEventListener("dragover",e);void 0!==a&&e(t,a)},{once:!0,passive:!0})}},28:function(e,t,r){"use strict";r.r(t);var n,s,o,i,a=r(6);function c(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var d=0;function l(e){return"__private_"+d+++"_"+e}t.default=new(n=class extends a.a{constructor(){super(),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,o,{writable:!0,value:void 0}),Object.defineProperty(this,i,{writable:!0,value:e=>{c(this,o)[o].data=e}}),c(this,o)[o]=document.createTextNode("No template selected"),document.head.querySelector("title").append(" - ",c(this,o)[o]),this.subscribe(c(this,i)[i])}set(e){e!==c(this,s)[s]&&(c(this,s)[s]=e,this.notify(c(this,s)[s]))}get(){return c(this,s)[s]}},s=l("currentName"),o=l("DOMNodeTitleForTemplateName"),i=l("updatePageTile"),n)},29:function(e,t,r){"use strict";var n,s,o,i,a=r(6);function c(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var d=0;function l(e){return"__private_"+d+++"_"+e}t.a=new(n=class extends a.a{constructor(){super(),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,o,{writable:!0,value:void 0}),Object.defineProperty(this,i,{writable:!0,value:e=>{c(this,o)[o].data=e}});const e=document.createElement("style");c(this,o)[o]=document.createTextNode(""),e.dataset.export=!0,e.appendChild(c(this,o)[o]),document.head.appendChild(e),this.subscribe(c(this,i)[i])}set(e){e!==c(this,s)[s]&&(c(this,s)[s]=e,this.notify(e))}get(){return c(this,s)[s]}},s=l("currentCSS"),o=l("DOMNodeStyle"),i=l("updateCustomCSS"),n)},36:function(e,t,r){"use strict";r.r(t);var n=r(6),s=r(28),o=r(15),i=r(2),a=r(29);const c=/\.json$/;t.default=new class extends n.a{initiateWith({name:e,hostname:t,css:r,components:n}){this.notify({name:e,hostname:t,css:r,components:n}),s.default.set(e),o.default.set("".concat(location.protocol,"//").concat(t)),a.a.set(r),i.a.set(n)}initiateWithFile(e){const t=e.name.replace(c,"");return new Response(e).json().then(e=>this.initiateWith(Object.assign({name:t},e)))}}},38:function(e,t,r){"use strict";r.r(t);var n=r(6),s=r(36),o=r(28),i=r(15),a=r(2),c=r(29);var d,l,u,h,p,b,f,v,m,y,O,g,w,j,E,S=r(41);function P(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var N=0;function x(e){return"__private_"+N+++"_"+e}const C=new(r.n(S).a);let L=Promise.resolve();t.default=new(d=class extends n.a{constructor(){super(),Object.defineProperty(this,O,{value:E}),Object.defineProperty(this,y,{value:j}),Object.defineProperty(this,p,{value:w}),Object.defineProperty(this,u,{value:g}),Object.defineProperty(this,l,{writable:!0,value:{isOutdated:!0,hasPreviousState:!1,hasNextState:!1}}),Object.defineProperty(this,h,{writable:!0,value:e=>(P(this,O)[O](),P(this,u)[u](257,e).finally(P(this,y)[y].bind(this)))}),Object.defineProperty(this,b,{writable:!0,value:P(this,u)[u].bind(this,17)}),Object.defineProperty(this,f,{writable:!0,value:P(this,u)[u].bind(this,18)}),Object.defineProperty(this,v,{writable:!0,value:P(this,u)[u].bind(this,19)}),Object.defineProperty(this,m,{writable:!0,value:P(this,u)[u].bind(this,20)}),P(this,y)[y]()}get(){return P(this,l)[l]}getCurrentStateAsArrayBuffer(){return P(this,u)[u](65).then(({data:e})=>[e])}getLastSavedDate(){return P(this,u)[u](260).then(e=>e&&new Date(e))}rewindToPreviousState(){return P(this,O)[O](),P(this,u)[u](129).finally(()=>P(this,y)[y]())}forwardToNextState(){return P(this,O)[O](),P(this,u)[u](130).finally(()=>P(this,y)[y]())}clearCurrentSession(){return P(this,O)[O](),P(this,u)[u](259).then(()=>s.default.initiateWith({})).finally(P(this,y)[y].bind(this))}clearSavedState(){return P(this,u)[u](258)}recoverSavedState(){return P(this,u)[u](33)}},l=x("state"),u=x("sendCommand"),h=x("initiateState"),p=x("set"),b=x("sendCommand_SAVE_NAME"),f=x("sendCommand_SAVE_HOSTNAME"),v=x("sendCommand_SAVE_CSS"),m=x("sendCommand_SAVE_COMPONENTS"),y=x("subscribeToObservables"),O=x("unsubscribeToObservables"),g=function(e,t=null){if(16&e&&null===t)return console.warn("Cannot save a null value"),Promise.resolve();let r;const n=new Promise(e=>r=e),s=L.then(()=>new Promise((r,n)=>{C.onmessage=({data:e})=>{r(e)},C.onmessageerror=n,C.onerror=n,C.postMessage([e,t])})).finally(r);return L=n,176&e?s.then(e=>P(this,p)[p](e)):s},w=function({name:e,hostname:t,css:r,components:n,hasPrevious:s,hasNext:d}){e&&o.default.set(e),t&&i.default.set(t),r&&c.a.set(r),n&&a.a.set(n),Object.assign(P(this,l)[l],{isOutdated:!1,hasPreviousState:s,hasNextState:d}),this.notify(P(this,l)[l])},j=function(){s.default.subscribe(P(this,h)[h]),o.default.subscribe(P(this,b)[b]),i.default.subscribe(P(this,f)[f]),c.a.subscribe(P(this,v)[v]),a.a.subscribe(P(this,m)[m])},E=function(){s.default.unsubscribe(P(this,h)[h]),o.default.unsubscribe(P(this,b)[b]),i.default.unsubscribe(P(this,f)[f]),c.a.unsubscribe(P(this,v)[v]),a.a.unsubscribe(P(this,m)[m])},d)},39:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return o}));const n=e=>{if("function"==typeof e.hasAttribute&&e.hasAttribute("data-contents"))return Array.from(e.childNodes,n);if("OUTPUT"===e.nodeName||"function"==typeof e.hasAttribute&&e.hasAttribute("data-do-not-export"))return[];const t=e.cloneNode(!1);if(e.attributes){for(const{name:r}of e.attributes)r.startsWith("data-")&&t.removeAttribute(r);t.removeAttribute("contenteditable"),t.removeAttribute("tabindex")}return Array.from(e.childNodes).flatMap(n).forEach(e=>t.appendChild(e)),e instanceof HTMLImageElement&&(t.setAttribute("height",e.naturalHeight),t.setAttribute("width",e.naturalWidth)),t};function s(){const e=document.querySelectorAll("[data-export]");return Array.from(e).flatMap(n)}async function o(){const e=await r.e(27).then(r.bind(null,15)).then(e=>e.default),t=await e.getHostNameRegExp("g");return s().map(e=>e.outerHTML.replace(t,"/"))}},41:function(e,t,r){e.exports=function(){return new Worker(r.p+"15dfd6836f073958412f.worker.js")}},49:function(e,t,r){},74:function(e,t,r){"use strict";r.r(t);var n=r(0),s=(r(49),r(25));const o="re-order-elements",i="re-order-elements-reordering",a=[],c=e=>{e.preventDefault();const{target:t}=e,n=Array.from(t.children).filter(e=>e.hasAttribute("data-type"));n.length?(Array.from(document.getElementsByClassName(i)).forEach(e=>e.classList.remove(i)),t.classList.add(i),t.prepend(document.getElementById(o)),u(),Array.from(n).forEach(l),1===n.length&&n[0].click(),t.scrollIntoViewIfNeeded({behavior:"smooth",block:"center"})):r.e(0).then(r.bind(null,18)).then(e=>e.default).then(e=>e("No content to reorder"))},d=Object(s.a)(({target:e},t)=>{t?e.parentElement.insertBefore(e,t):e.remove()}),l=e=>{a.push(e),e.addEventListener("click",c),e.addEventListener("dragstart",d),e.draggable=!0},u=()=>{a.forEach(e=>{e.removeEventListener("click",c),e.removeEventListener("dragstart",d),e.draggable=!1}),a.splice(0)};class h extends n.a{componentDidMount(){Array.from(document.querySelectorAll("#".concat(o,"~[data-type]"))).forEach(l)}componentWillUnmount(){u(),Array.from(document.getElementsByClassName(i)).forEach(e=>e.classList.remove(i)),document.getElementById(o).remove()}render(){return Object(n.h)("div",{"data-ignore":!0,"data-do-not-export":!0,id:o})}}var p=r(26),b=r(27),f=r(38);function v(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var m=0;function y(e){return"__private_"+m+++"_"+e}const O=f.default.forwardToNextState.bind(f.default);class g extends n.a{constructor(...e){super(...e),Object.defineProperty(this,w,{writable:!0,value:this.update.bind(this)}),Object.defineProperty(this,j,{writable:!0,value:()=>{this.state.hasNextState||this.props.editor.forceToReRender(),f.default.rewindToPreviousState()}})}componentDidMount(){f.default.subscribe(v(this,w)[w]),this.update(f.default.get())}componentWillUnmount(){f.default.unsubscribe(v(this,w)[w])}update({hasPreviousState:e,hasNextState:t}){e===this.state.hasPreviousState&&t===this.state.hasNextState||this.setState({hasPreviousState:e,hasNextState:t})}render(){return Object(n.h)(n.b,null,Object(n.h)("button",{onClick:v(this,j)[j],disabled:!this.state.hasPreviousState,title:"Cancel last action",accessKey:"z"},Object(n.h)(p.a,{icon:b.n})," Undo"),Object(n.h)("button",{onClick:O,disabled:!this.state.hasNextState,title:"Redo last action",accessKey:"y"},Object(n.h)(p.a,{icon:b.k})," Redo"))}}var w=y("update"),j=y("undo"),E=r(1);const S=f.default.clearCurrentSession.bind(f.default);class P extends E.a{componentDidMount(){this.base.focus()}render(){return Object(n.h)("button",{onClick:S,title:"Close current template",accessKey:"q"},Object(n.h)(p.a,{icon:b.m})," Close")}}function N(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var x=0;function C(e){return"__private_"+x+++"_"+e}class L extends E.a{constructor(...e){super(...e),Object.defineProperty(this,T,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:!1}),Object.defineProperty(this,_,{writable:!0,value:()=>this.props.editor.setState(e=>e.reOrder?(this.props.editor.commitChanges(),N(this,A)[A]=!0,{reOrder:!1}):(N(this,T)[T]=window.scrollY,{reOrder:!0}),()=>N(this,A)[A]&&!(N(this,A)[A]=!1)&&window.scrollTo(0,N(this,T)[T]))})}render(){return Object(n.h)("button",{onClick:N(this,_)[_],style:this.props.editor.state.reOrder?{borderStyle:"inset"}:{},title:"Toggle re-order mode",accessKey:"r"},Object(n.h)(p.a,{icon:b.l})," Re-order components")}}var T=C("savedScrollPosition"),A=C("requestScroll"),_=C("toggleReOrder"),k=r(39);function M(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var D=0;function R(e){return"__private_"+D+++"_"+e}const U=()=>Promise.resolve().then(r.bind(null,28)).then(e=>e.default).then(e=>e.get()),F=()=>Promise.resolve().then(r.bind(null,38)).then(e=>e.default).then(e=>e.getCurrentStateAsArrayBuffer());class q extends E.a{constructor(...e){super(...e),Object.defineProperty(this,H,{value:I}),Object.defineProperty(this,W,{writable:!0,value:this.exportJSONFile.bind(this)}),Object.defineProperty(this,B,{writable:!0,value:this.exportHTMLFile.bind(this)})}exportJSONFile(){return Promise.all([U(),F()]).then(([e,t])=>M(this,H)[H](e+".json","application/json",t))}exportHTMLFile(){return Promise.all([U(),Object(k.b)()]).then(([e,t])=>M(this,H)[H](e+".html","text/html",t))}render(){return Object(n.h)(n.b,null,Object(n.h)("button",{onClick:M(this,W)[W],title:"Export as JSON",accessKey:"s"},Object(n.h)(p.a,{icon:b.c})," Save"),Object(n.h)("button",{onClick:M(this,B)[B],title:"Export as HTML",accessKey:"x"},Object(n.h)(p.a,{icon:b.e})," Export"))}}var H=R("exportFile"),W=R("exportJSONFile"),B=R("exportHTMLFile"),I=function(e,t,r){const n=document.createElement("a"),s=new File(r,e,{type:t});n.href=URL.createObjectURL(s),n.download=e,document.body.append(n),n.click(),requestIdleCallback(()=>{URL.revokeObjectURL(n.href),n.remove()})},J=r(14);function K(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var V=0;function z(e){return"__private_"+V+++"_"+e}class Y extends E.a{constructor(...e){super(...e),this.state={editTemplate:null},Object.defineProperty(this,$,{writable:!0,value:()=>this.setState({editTemplate:!0})}),Object.defineProperty(this,G,{writable:!0,value:{resetState:()=>this.setState({editTemplate:!1})}})}render(){return Object(n.h)("button",{onClick:K(this,$)[$],title:"Edit template settings"},Object(n.h)(p.a,{icon:b.b})," Settings",Object(n.h)(J.default,{componentName:"TemplateSettings",active:this.state.editTemplate,props:K(this,G)[G]}))}}var $=z("editTemplate"),G=z("editTemplateProps");class Q extends n.a{componentDidMount(){}render(){return Object(n.h)(n.b,null,Object(n.h)(q,{editor:this.props.editor}),Object(n.h)(g,{editor:this.props.editor})," | ",Object(n.h)(Y,{editor:this.props.editor}),Object(n.h)(L,{editor:this.props.editor})," | ",Object(n.h)(P,{editor:this.props.editor}))}}var X=r(17);function Z(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}r.d(t,"default",(function(){return re}));var ee=0;function te(e){return"__private_"+ee+++"_"+e}class re extends n.a{constructor(...e){super(...e),Object.defineProperty(this,ne,{writable:!0,value:new window.MutationObserver(this.handleMutation.bind(this))}),Object.defineProperty(this,se,{writable:!0,value:new WeakMap}),Object.defineProperty(this,oe,{writable:!0,value:!1}),Object.defineProperty(this,ie,{writable:!0,value:!1}),this.state={hasError:!1,showControls:!1,reOrder:!1}}get data(){return Z(this,se)[se].get(this)}commitChanges(){Z(this,oe)[oe]=!0,this.props.onChange(this.data)}forceToReRender(){Z(this,ie)[ie]=!0,this.forceUpdate()}handleMutation(e,t){let r=!1,n=!1;const s=Z(this,se)[se];for(const t of e){const{target:e,type:o}=t;switch(o){case"childList":const{addedNodes:o,removedNodes:i,nextSibling:a}=t;o.length&&Array.from(o).forEach(t=>{if(!t.dataset.ignore){if(s.has(t)||this.observeNode(t),a&&s.has(a)){var o;const r=null===(o=s.get(e))||void 0===o?void 0:o.content,n=null==r?void 0:r.indexOf(s.get(a));r&&-1!==n&&r.splice(n,0,s.get(t))}else{var i;null===(i=s.get(e))||void 0===i||i.content.push(s.get(t))}n=!0,t.dataset.requestRender&&(r=!0)}}),i.length&&Array.from(i).forEach(t=>{var r;if(t.dataset.ignore)return;const o=null===(r=s.get(e))||void 0===r?void 0:r.content,i=null==o?void 0:o.indexOf(s.get(t));o&&-1!==i&&o.splice(i,1),n=!0});break;case"characterData":let c=e;for(;c.parentElement.isContentEditable;)c=c.parentElement;const{dataset:d,textContent:l}=c;for(;!Z(this,se)[se].has(c);)c=c.parentElement;Z(this,se)[se].get(c)[d.key]=l,n=!0;break;case"attributes":if("data-json"===t.attributeName){const t=Z(this,se)[se].get(e);Object.keys(t).forEach(e=>{t[e]=void 0}),Object.assign(t,JSON.parse(e.dataset.json)),n=!0,r=!0}}}n&&this.props.onChange(s.get(this),r)}observeNode(e){const{ignore:t,type:r,json:n}=e.dataset;if(!t){if(n)return Z(this,ne)[ne].observe(e,{attributes:!0}),Z(this,se)[se].set(e,JSON.parse(n));r&&(Z(this,ne)[ne].observe(e,{childList:!0}),Z(this,se)[se].set(e,{type:r,content:[]})),e.childElementCount&&Array.from(e.children).forEach(t=>{const{ignore:r,key:n}=t.dataset;if(r);else if(n)Array.from(t.childNodes).forEach(e=>Z(this,ne)[ne].observe(e,{characterData:!0})),Z(this,se)[se].get(e)[n]=t.textContent,t.contentEditable=!0;else{var s,o;this.observeNode(t),null===(s=Z(this,se)[se].get(e))||void 0===s||null===(o=s.content)||void 0===o||o.push(Z(this,se)[se].get(t))}})}}observeNodeDeep(e){if(Z(this,se)[se].has(e));else if(e.dataset.contents)Array.from(e.children,this.observeNodeDeep.bind(this));else if(e.dataset.type){var t;this.observeNode(e),Z(this,se)[se].get(this)[e.dataset.type]=null===(t=Z(this,se)[se].get(e))||void 0===t?void 0:t.content}else Z(this,se)[se].set(e,"ignore")}componentDidMount(){Z(this,se)[se].set(this,{}),requestIdleCallback(this.checkForDOMChanges.bind(this))}checkForDOMChanges(){for(const e of document.querySelectorAll("[data-export]"))this.observeNodeDeep(e)}shouldComponentUpdate(){if(Z(this,oe)[oe])return Z(this,oe)[oe]=!1}componentDidUpdate(){Z(this,ie)[ie]=!1,requestIdleCallback(this.checkForDOMChanges.bind(this))}componentWillUnmount(){Z(this,ne)[ne].disconnect()}componentDidCatch(e,t){console.warn(e,t)}render(){var e;return Object(n.h)(n.b,null,Object(n.h)("header",null,Object(n.h)("h1",null,this.props.title),Object(n.h)(Q,{editor:this})),this.state.reOrder?Object(n.h)(h,null):null,Z(this,ie)[ie]?Object(n.h)("div",{style:{height:CSS.px(null===(e=document.querySelector("main"))||void 0===e?void 0:e.offsetHeight)}},Object(n.h)(X.a,null)):this.props.children)}}var ne=te("observer"),se=te("DOMData"),oe=te("letSNotBuildTheDOMAgain"),ie=te("waitForHistoryRewind")}}]);